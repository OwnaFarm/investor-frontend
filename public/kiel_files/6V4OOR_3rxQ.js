;/*FB_PKG_DELIM*/

__d("MWChatTemporarySearchResult",["DisappearingMessagesMode","FBLogger","I64","LSContactBitOffset","LSContactType","LSContactTypeExact","LSContactViewerRelationship","LSInstagramE2EEEligibility","LSIntEnum","LSMessagingThreadTypeUtil","LSRestrictionType","LSThreadBitOffset","LSWhatsAppConnectStatus","MAWDefaultE2eeOneToOneEligibility","MWChatSearchResultType","MWChatTemporarySearchResultUtils","MWLSContactTypeExactUtils","MWLSThreadTitle","MWSearchStandardResultTypeMappings","getLSMediaContactProfilePictureUrl","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(6))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(7))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(8))?!0:(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(9))}function c(t){return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(1))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(16))||u(t)?r("MWChatSearchResultType").USER:(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(3))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(14))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(13))?r("MWChatSearchResultType").GROUP:(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(4))?r("MWChatSearchResultType").PAGE:(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(5))?r("MWChatSearchResultType").MESSAGE:(r("FBLogger")("messenger_web").warn("Unknown Search Result Type "+(e||(e=o("I64"))).to_string(t)),r("MWChatSearchResultType").USER)}function d(e,t){return!r("gkx")("23433")||!r("gkx")("6710")||t==null?!1:!!(t.startsWith("@")||t.trim().length===t.length&&t.indexOf(".")!==-1||t.trim()===e)}function m(e){return(e==null?void 0:e.threadType)==null?!1:o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(e.threadType)}function p(e,t){var n=d(e.username,t);if(n&&e.username!=null)return e.username;var r=o("MWLSContactTypeExactUtils").isIgContact(e.contactTypeExact);return r&&e.secondaryName!=null?e.secondaryName:""}function _(e){var t=d(e.contextLine,e.query);if(t&&e.contextLine!=null)return e.contextLine;var n=m(e);return n&&e.contextLine!=null||e.contextLine!=null&&r("gkx")("16600")?e.contextLine:""}function f(t,n,a,i,l,u,c){var d,m,_=a.contactType,f=a.contactTypeExact,g=o("MWLSContactTypeExactUtils").isIgContact(f),h=p(a,c),y=i!=null?[i.e2eeEligibility,!(e||(e=o("I64"))).equal(i.e2eeEligibility,(s||(s=o("LSIntEnum"))).ofNumber(r("LSInstagramE2EEEligibility").INELIGIBLE))]:[void 0,void 0],C=y[0],b=y[1];return{defaultE2eeThreadOneToOne:o("MAWDefaultE2eeOneToOneEligibility").isContactDefaultE2eeOneToOneEligible({maybeContact:a}),defaultE2eeThreads:o("LSContactBitOffset").has(80,a),displayName:a.name,hasCutoverThread:o("LSContactBitOffset").has(76,a),id:(e||(e=o("I64"))).to_string(a.id),imageUrl:r("getLSMediaContactProfilePictureUrl")(a),isAiBot:e.equal(a.contactTypeExact,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").GENERATIVE_AI_BOT)),isContact:e.equal(a.contactViewerRelationship,s.ofNumber(r("LSContactViewerRelationship").CONTACT_OF_VIEWER)),isDisappearingModeSettingOn:o("LSContactBitOffset").has(94,a),isE2EE:n===!0,isEPD:e.equal(a.restrictionType,s.ofNumber(r("LSRestrictionType").DATA_PRIVACY)),isGroupsXacEligible:o("LSContactBitOffset").has(68,a),isInstagramAccount:g,isInstamadilloCutover:o("LSContactBitOffset").has(95,a),isInteropEligible:o("LSContactBitOffset").has(67,a),isTTLCClipEnabled:o("LSContactBitOffset").has(96,a),isTTLCGenericXMAShareEnabled:o("LSContactBitOffset").has(97,a),isTTLCMediaShareEnabled:o("LSContactBitOffset").has(98,a),isTTLCStoryShareEnabled:o("LSContactBitOffset").has(99,a),isVerified:(d=o("LSContactBitOffset").has(23,a))!=null?d:!1,isViewerUnconnected:o("MWChatTemporarySearchResultUtils").isViewerUnconnectedForContact(a),isWAEligible:b,matchedTerms:u,rankingScore:t,reachabilityStatus:a.contactReachabilityStatusType,resultIgid:(m=i==null?void 0:i.igId)!=null?m:void 0,resultType:(e||(e=o("I64"))).equal(_,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactType").USER))||!((e||(e=o("I64"))).equal(_,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactType").PAGE))||(e||(e=o("I64"))).equal(_,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactType").PAGE_PERSONA)))?r("MWChatSearchResultType").USER:r("MWChatSearchResultType").PAGE,searchResultType:o("MWSearchStandardResultTypeMappings").mapContactToSearchStandardResultType(a),searchSource:l,section:o("MWChatTemporarySearchResultUtils").getSectionHeaderForContact(a),subtext:h,supportsE2eeSpamdStorage:i!=null?i.supportsE2eeSpamdStorage:void 0,waAddressable:e.equal(a.waConnectStatus,s.ofNumber(r("LSWhatsAppConnectStatus").WHATSAPP_ADDRESSABLE)),waEligibility:C}}function g(e,t,n){var r=e.threadDescription,a=e.threadName;return r!=null?r:a!=null&&a!==""?o("MWLSThreadTitle").getDefaultThreadTitle(void 0,t,n,e.threadType).toString():""}function h(t,n,r){if(o("LSMessagingThreadTypeUtil").isArmadilloSecureOneToOne(t.threadType)){var a=n.find(function(t){return!(e||(e=o("I64"))).equal(t.contact_id,r)});if(a!=null)return a.contact_id}}function y(t,n,a,i,l,u,c,d,m){var p,_=g(t,a,u),f=h(t,u,a),y=f!=null?(e||(e=o("I64"))).to_string(f):void 0;return{displayName:o("MWLSThreadTitle").getDefaultThreadTitle(t.threadName,a,u,t.threadType).toString(),id:(e||(e=o("I64"))).to_string(t.threadKey),imageUrl:i,isAiBot:e.equal(t.threadType,(s||(s=o("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:e.to_int32((p=m==null?void 0:m.igDmSettingsMode)!=null?p:(e||(e=o("I64"))).zero)===r("DisappearingMessagesMode").ON,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:o("LSThreadBitOffset").has(214,t),isTTLCClipEnabled:o("LSThreadBitOffset").has(226,t),isTTLCGenericXMAShareEnabled:o("LSThreadBitOffset").has(231,t),isTTLCMediaShareEnabled:o("LSThreadBitOffset").has(228,t),isTTLCStoryShareEnabled:o("LSThreadBitOffset").has(229,t),isVerified:!1,matchedTerms:d,otherUserId:y,rankingScore:c,resultType:r("MWChatSearchResultType").GROUP,searchResultType:o("MWSearchStandardResultTypeMappings").mapThreadTypeToSearchStandardResultType(t.threadType),searchSource:n,secondaryImageUrl:l,section:"",subtext:_,threadKey:t.threadKey,threadType:t.threadType}}function C(t,n,a){var i,l,d=(e||(e=o("I64"))).equal(t.type_,(s||(s=o("LSIntEnum"))).ofNumber(1)),m=_(t),p=u(t.type_),f=t.defaultE2eeThreadOneToOne,g=t.defaultE2eeThreads,h=t.hasCutoverThread,y=t.isVerified,C=t.otherUserId,b=t.query,v=t.supportsE2eeSpamdStorage,S=t.waEligibility,R=n!=null&&(i=n.displayName)!=null?i:"";return b===""&&(R=o("MWChatTemporarySearchResultUtils").getSectionHeaderForContactsNullstate()),{canViewerMessage:t.canViewerMessage,communityId:t.communityId,defaultE2eeThreadOneToOne:f!==null?f:void 0,defaultE2eeThreads:g!==null?g:void 0,displayName:t.displayName,hasCutoverThread:h!==null?h:void 0,id:t.resultId,imageUrl:t.profilePicUrl,isAiBot:e.equal(t.type_,s.ofNumber(16)),isContact:d,isDisappearingModeSettingOn:!!t.isDisappearingModeSettingOn,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType),isEPD:!1,isGroupCreationReachable:t.isGroupCreationReachable,isGroupsXacEligible:t.isGroupsXacEligible,isInstagramAccount:p,isInstamadilloCutover:!!t.isInstamadilloCutover,isInteropEligible:t.isInteropEligible,isRestrictedByViewer:t.isRestrictedByViewer,isTTLCClipEnabled:!!t.hasTtlcClipEnabled,isTTLCGenericXMAShareEnabled:!!t.hasTtlcGenericXmaShareEnabled,isTTLCMediaShareEnabled:!!t.hasTtlcMediaShareEnabled,isTTLCStoryShareEnabled:!!t.hasTtlcStoryShareEnabled,isVerified:y!=null?y:!1,isViewerUnconnected:t.isViewerUnconnected,isWAEligible:S!=null?!(e||(e=o("I64"))).equal(S,(s||(s=o("LSIntEnum"))).ofNumber(r("LSInstagramE2EEEligibility").INELIGIBLE)):void 0,otherUserId:C!=null?(e||(e=o("I64"))).to_string(C):void 0,reachabilityStatus:t.reachabilityStatus,restrictionType:t.restrictionType,resultIgid:t.resultIgid,resultType:c(t.type_),searchResultType:o("MWSearchStandardResultTypeMappings").mapServerSearchResultToSearchStandardResultType(t.threadType,t.type_,a),searchSource:a,secondaryImageUrl:t.secondaryProfilePicUrl,section:R,sectionAnalyticsName:n==null?void 0:n.analyticsName,serverSearchResult:t,subtext:m,subtextAdditional:(l=t.secondaryContextLine)!=null?l:"",supportsE2eeSpamdStorage:v,threadJoinLinkHash:t.threadJoinLinkHash,threadType:t.threadType,waAddressable:t.isWaAddressable,waEligibility:t.waEligibility}}l.checkIsInstagramAccount=u,l.getResultType=c,l.fromContact=f,l.fromThread=y,l.fromServerSearchResult=C}),98);
__d("LSClearTables",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(e){return t.forEach(t.db.table(67).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(66).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(65).fetch(),function(e){return e.delete()})},function(n){return e[0]===void 0||e[0]===!0?t.forEach(t.db.table(69).fetch(),function(e){return e.delete()}):t.resolve()}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSSearchClearTablesStoredProcedure",e.__tables__=["search_queries","server_search_sections","server_search_results","message_search_results"],a.exports=e}),null);
__d("LSClearTablesStoredProcedure",["LSClearTables","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){a===void 0&&(a={});var i=t.storedProcedure(r("LSClearTables"),a.clearMessageResults);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSInsertRankingContacts",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("limit",e[0]),r[1]=t.createArray(),r[5]=(r[1].push("search_contacts"),r[1]),r[2]=t.i64.of_float(Date.now()),r[5]=(r[1].push(t.i64.to_string(r[2])),r[1]),r[3]=t.toJSON(r[1]),r[4]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),r[3],t.i64.cast([0,452]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSSearchInsertRankingContactsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSInsertRankingContactsStoredProcedure",["LSInsertRankingContacts","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSInsertRankingContacts"),a.limit);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MWChatSearchInsertRankingContacts",["I64","LSFactory","LSInsertRankingContactsStoredProcedure","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s={contents:!1},u={contents:!1},c=(e||(e=o("I64"))).of_string("100");function d(t){if(!s.contents&&(e||(e=o("I64"))).gt(c,(e||(e=o("I64"))).zero)){s.contents=!0,r("promiseDone")(t.runInTransaction(function(e){return r("LSInsertRankingContactsStoredProcedure")(r("LSFactory")(e),{limit:c})},"readwrite",void 0,void 0,i.id+":39"),function(){u.contents=!0});return}}function m(){return u.contents}l.insertRankingContacts=d,l.isDone=m}),98);
__d("MWLSSyncRankings",["LSIntEnum","MWLSDatabaseLazySync","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s={contents:!1},u={contents:!1};function c(t){if(!s.contents){s.contents=!0,r("promiseDone")(o("MWLSDatabaseLazySync").sync(t,(e||(e=o("LSIntEnum"))).ofNumber(7)),function(){u.contents=!0});return}}function d(){return u.contents}l.sync=c,l.isDone=d}),98);
__d("MWPSearchIndexingSource",["I64","LSIntEnum","ReQL","ReQLSuspense"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.contacts))}function c(t){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.threads).filter(function(t){return(e||(e=o("I64"))).equal(t.threadType,(s||(s=o("LSIntEnum"))).ofNumber(2))}))}function d(t,n){return c(n).then(function(r){var a=new Set(r.map(function(t){return(e||(e=o("I64"))).to_string(t.threadKey)}));return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.tables.participants).filter(function(n){return!(e||(e=o("I64"))).equal(n.contactId,t)&&a.has((e||(e=o("I64"))).to_string(n.threadKey))}).map(function(e){var t=[e,o("ReQLSuspense").first(o("ReQL").fromTableAscending(n.tables.contacts).getKeyRange(e.contactId),i.id+":54")];return t}))})}l.fetchContacts=u,l.fetchGroupThreads=c,l.fetchGroupParticipants=d}),98);
__d("MWPOfllineOpenMiniSearchSingleton",["MWPMiniSearch"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWPMiniSearch").createMiniSearchSingleton(function(){return{storeFields:["category"]}}),s=e;l.default=s}),98);
__d("MWPSearchOfflineOpenConversations",["MWPOfllineOpenMiniSearchSingleton"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("MWPOfllineOpenMiniSearchSingleton").getInstance().search(e)}function s(e){r("MWPOfllineOpenMiniSearchSingleton").getInstance().add(e)}function u(e){r("MWPOfllineOpenMiniSearchSingleton").getInstance().remove(e)}l.search=e,l.add=s,l.remove=u}),98);
__d("MWPSearchOfflineSearchTypes",[],(function(t,n,r,o,a,i){"use strict";var e="Contact",l="ThreadName",s="ThreadParticipant",u={Contact:e,ThreadName:l,ThreadParticipant:s};i.MWPSearchType=u}),66);
__d("MWSearchQPLLogger",["MAWLoggerUtils","QPLUserFlow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e={hasStarted:!1,instanceKey:o("MAWLoggerUtils").getInstanceKey(),query:null,sessionInstanceId:null},s=r("qpl")._(25301700,"2966");function u(){e.hasStarted=!1,e.query=null}function c(t){var n,a=t.queryString,i=t.sessionInstanceId,l=t.surface;return e.query!=null&&a===""||(e.hasStarted&&d(),e.instanceKey=o("MAWLoggerUtils").getInstanceKey(),e.hasStarted=!0,e.query=a!=null?a:"",e.sessionInstanceId=i,r("QPLUserFlow").start(s,{instanceKey:e.instanceKey}),p({annotations:{int:{query_length:(n=a==null?void 0:a.length)!=null?n:0},string:{surface:l}}})),e.instanceKey}function d(t){e.hasStarted&&(r("QPLUserFlow").endCancel(s,{annotations:{string:{end_action:t!=null?t:"unknown"}},instanceKey:e.instanceKey}),u())}function m(t){var n=t.annotations,o=t.point;e.hasStarted&&(r("QPLUserFlow").addPoint(s,o,{instanceKey:e.instanceKey}),n!=null&&r("QPLUserFlow").addAnnotations(s,n,{instanceKey:e.instanceKey}))}function p(t){var n=t.annotations;e.hasStarted&&r("QPLUserFlow").addAnnotations(s,n,{instanceKey:e.instanceKey})}function _(t){var n=t.queryString,o=t.renderIndex,a=t.sessionInstanceId,i=t.source;e.hasStarted&&a===e.sessionInstanceId&&n===e.query&&r("QPLUserFlow").addPoint(s,"render_search_result_"+o,{data:{int:{render_index:o},string:{source:i!=null?i:"unknown"}},instanceKey:e.instanceKey})}function f(){e.hasStarted&&(r("QPLUserFlow").endSuccess(s,{instanceKey:e.instanceKey}),u())}l.qplStart=c,l.qplCancel=d,l.qplAddPoint=m,l.qplAddAnnotations=p,l.renderSearchResult=_,l.qplSuccess=f}),98);
__d("MWPSearchOfflineOpenConversationsUtils",["I64","LSAuthorityLevel","LSContactBitOffset","LSContactBlockedByViewerStatus","LSInitSyncCompleteSubscription","LSIntEnum","LSMessagingThreadTypeUtil","MNetRankType","MWChatSearchResultType","MWChatTemporarySearchResult","MWPSearchOfflineOpenConversations","MWPSearchOfflineSearchTypes","MWSearchQPLLogger","MWSearchThreadUtils","Promise","ReQL","asyncToGeneratorRuntime","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=r("justknobx")._("5018");function d(e,t){return"p__"+(u||(u=o("I64"))).to_string(e)+"__"+u.to_string(t)}function m(t,a){if(o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"offline_search_start"}),h.contents==null)return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{string:{offline_search_end_reason:"initial_index_not_started"}},point:"offline_search_end"}),(e||(e=n("Promise"))).resolve([]);var i=h.contents,l=o("MWPSearchOfflineOpenConversations").search(t).filter(function(e){return y(e,a)!==!0});return r("gkx")("6792")===!0?p(i,l,t):o("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(i,(s||(s=o("LSIntEnum"))).ofNumber(7)).then(function(){return p(i,l,t)})}function p(e,t,n){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a){var i=g(yield(e||(e=n("Promise"))).all(r.map(function(r){var i=r.category.type;if(i==null)return(e||(e=n("Promise"))).resolve();switch(i){case o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant:{var l=C(r.id);if(l!=null){var s=l[0];return L(t,(u||(u=o("I64"))).to_string(s),r.terms)}else return(e||(e=n("Promise"))).resolve()}case o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName:return L(t,r.id,r.terms);case o("MWPSearchOfflineSearchTypes").MWPSearchType.Contact:return b(t,r.id,r.terms,a)}}))),l=f(i.filter(Boolean));return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"offline_search_end"}),l}),_.apply(this,arguments)}function f(e){var t=e.filter(function(e){return e.resultType!==r("MWChatSearchResultType").GROUP}).sort(I),n=e.filter(function(e){return e.resultType===r("MWChatSearchResultType").GROUP}).sort(I),o=t.concat(n);return o}function g(e){if(!c)return e;var t=[],n=new Set;for(var r of e)r&&!n.has(r.id)&&(n.add(r.id),t.push(r));return t}var h={contents:void 0};function y(e,t){if(t)return!1;var n=e.category;return(n==null?void 0:n.type)!=="Contact"}function C(e){var t=e.split("__");if(t.length===3)return[(u||(u=o("I64"))).of_string(t[1]),u.of_string(t[2])]}function b(e,t,n,r,o){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,c){c===void 0&&(c="offline");var d=yield(e||(e=n("Promise"))).all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.contacts).getKeyRange((u||(u=o("I64"))).of_string(a))),o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.ig_contact_info).getKeyRange(u.of_string(a))),o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.ranking_scores).getKeyRange(u.of_string(a),(s||(s=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH)))]),m=d[0],p=d[1],_=d[2];if(!(m==null||S(m,l,c)))return o("MWChatTemporarySearchResult").fromContact(_!=null?_:void 0,void 0,m,p!=null?p:void 0,c,i,l)}),v.apply(this,arguments)}function S(e,t,n){var a=o("LSContactBitOffset").hasWithDefault(66,e,!1);return e.isMemorialized===!0||(u||(u=o("I64"))).equal(e.contactViewerRelationship,(u||(u=o("I64"))).one)&&n!=="null_state_recent"||!(u||(u=o("I64"))).equal(e.blockedByViewerStatus,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED))||a&&R(e.name,t)}function R(e,t,n){n===void 0&&(n=.7);var r=e.trim().toLowerCase(),o=t.trim().toLowerCase(),a=!r.startsWith(o)||o.length/r.length<n;return a}function L(e,t,n){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a){var i=yield(e||(e=n("Promise"))).all([o("ReQL").firstExnAsync(o("ReQL").fromTableAscending(t.tables._user_info).map(function(e){return e.facebookUserId})),o("ReQL").firstAsync(o("ReQL").leftJoin(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange((u||(u=o("I64"))).of_string(r)).filter(function(e){return!k(e)}),o("ReQL").fromTableAscending(t.tables.ig_thread_info).getKeyRange(u.of_string(r))))]),l=i[0],s=i[1];if(s==null)return(e||(e=n("Promise"))).resolve();var c=s[0],d=s[1],m=yield e.all([o("MWSearchThreadUtils").getThreadPics(c,l,t),o("MWSearchThreadUtils").getThreadParticipants(c,t)]),p=m[0],_=m[1],f={contactId:u.zero,contactType:u.zero,score:u.to_float(c.lastActivityTimestampMs),scoreIndex:u.zero,scoreType:u.zero};return o("MWChatTemporarySearchResult").fromThread(c,"offline",l,p[0],p[1],_,f,a,d)}),E.apply(this,arguments)}function k(e){return e.folderName!=="inbox"||o("LSMessagingThreadTypeUtil").isChannelPreview(e.threadType)||o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)&&o("LSMessagingThreadTypeUtil").isOneToOne(e.threadType)&&(u||(u=o("I64"))).equal(e.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))}function I(e,t){var n=e.rankingScore,r=n!=null?n.score:0,o=t.rankingScore,a=o!=null?o.score:0;return a>r?1:a<r?-1:0}l.getGroupParticipantKey=d,l.search=m,l.searchHelper=p,l.db=h,l.mapContact=b,l.mapThread=L}),98);
__d("MWPSearchOpenIndexer",["I64","LSIntEnum","MWPSearchOfflineOpenConversations","MWPSearchOfflineOpenConversationsUtils","MWPSearchOfflineSearchTypes","Promise","ReQL","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=new Map,d=new Map,m=new Map;function p(e){var t=e.id,n=e.name,r=(s||(s=o("I64"))).to_string(t),a={category:{type:o("MWPSearchOfflineSearchTypes").MWPSearchType.Contact},content:n,id:r};o("MWPSearchOfflineOpenConversations").add(a),c.set(r,a)}function _(e){var t=c.get(e);if(t!=null){c.delete(e),o("MWPSearchOfflineOpenConversations").remove(t);return}}function f(e){var t=e.threadKey,n=e.threadName;if(n!=null){var r=(s||(s=o("I64"))).to_string(t),a={category:{type:o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName},content:n,id:r};o("MWPSearchOfflineOpenConversations").add(a),d.set(r,a)}}function g(e){var t=d.get(e);if(t!=null){d.delete(e),o("MWPSearchOfflineOpenConversations").remove(t);return}}function h(e,t){if(t!=null){var n=o("MWPSearchOfflineOpenConversationsUtils").getGroupParticipantKey(e.threadKey,e.contactId),r=t.name;e.nickname!=null&&(r+=" "+e.nickname);var a={category:{type:o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant},content:r.trim(),id:n};o("MWPSearchOfflineOpenConversations").add(a),m.set(n,a)}}function y(e,t){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(t.contactId)),a=yield b(e,t.threadKey);if(!(a&&r("gkx")("16989")))return h(t,n)}),C.apply(this,arguments)}function b(e,t){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(t));return n==null?!1:!(s||(s=o("I64"))).equal(n.threadType,(u||(u=o("LSIntEnum"))).ofNumber(2))}),v.apply(this,arguments)}function S(e,t){var n=o("MWPSearchOfflineOpenConversationsUtils").getGroupParticipantKey(e,t),r=m.get(n);if(r!=null){m.delete(n),o("MWPSearchOfflineOpenConversations").remove(r);return}}function R(e,t){switch(t.operation){case"add":return p(t.value);case"put":return _((s||(s=o("I64"))).to_string(e)),p(t.value);case"delete":return _((s||(s=o("I64"))).to_string(e))}}function L(e,t){switch(t.operation){case"add":return f(t.value);case"put":return g((s||(s=o("I64"))).to_string(e)),f(t.value);case"delete":return g((s||(s=o("I64"))).to_string(e))}}function E(t,r,o,a){switch(a.operation){case"add":return y(t,a.value);case"put":return S(r,o),y(t,a.value);case"delete":return(e||(e=n("Promise"))).resolve(S(r,o))}}function k(e,t,n,r){o("MWPSearchOfflineOpenConversationsUtils").db.contents=e,t.forEach(p),n.forEach(f),r.forEach(function(e){var t=e[0],n=e[1];return h(t,n)})}l.onContactChanged=R,l.onGroupThreadChanged=L,l.onGroupParticipantChanged=E,l.startInitialIndex=k}),98);
__d("MWPSearchSystem",["CurrentUser","FBLogger","I64","JSScheduler","LSClearTablesStoredProcedure","LSFactory","LSIntEnum","MWChatSearchInsertRankingContacts","MWLSSyncRankings","MWPSearchIndexingSource","MWPSearchOpenIndexer","Promise","ReQL","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d={contents:!1},m={contents:!1},p={contents:!1};function _(t){if(!p.contents){p.contents=!0,(s||(s=o("JSScheduler"))).scheduleSpeculativeCallback(function(){o("MWChatSearchInsertRankingContacts").insertRankingContacts(t),o("MWLSSyncRankings").sync(t);var a=(c||(c=o("I64"))).of_string(r("CurrentUser").getID());if(!d.contents){d.contents=!0;var i=r("gkx")("16989");r("promiseDone")((e||(e=n("Promise"))).all([o("MWPSearchIndexingSource").fetchContacts(t),i?o("MWPSearchIndexingSource").fetchGroupThreads(t):(e||(e=n("Promise"))).resolve([]),i?o("MWPSearchIndexingSource").fetchGroupParticipants(a,t):(e||(e=n("Promise"))).resolve([])]).then(function(e){var n=e[0],r=e[1],a=e[2];o("MWPSearchOpenIndexer").startInitialIndex(t,n,r,a)}),function(){m.contents=!0},function(e){r("FBLogger")("messenger_web_search").catching(e).mustfix("Error indexing contacts for search")}),o("ReQL").fromTableAscending(t.tables.contacts).subscribe(function(e,t){var n=e[0];o("MWPSearchOpenIndexer").onContactChanged(n,t)}),i&&(o("ReQL").fromTableAscending(t.tables.threads).filter(function(e){return(c||(c=o("I64"))).equal(e.threadType,(u||(u=o("LSIntEnum"))).ofNumber(2))}).subscribe(function(e,t){var n=e[0];o("MWPSearchOpenIndexer").onGroupThreadChanged(n,t)}),o("ReQL").fromTableAscending(t.tables.participants,["contactId","threadKey","nickname"]).filter(function(e){return!(c||(c=o("I64"))).equal(e.contactId,a)}).subscribe(function(e,n){var a=e[0],i=e[1];r("promiseDone")(o("MWPSearchOpenIndexer").onGroupParticipantChanged(t,a,i,n))}))}});return}}function f(e){return e.runInTransaction(function(e){return r("LSClearTablesStoredProcedure")(r("LSFactory")(e),{clearMessageResults:!1})},"readwrite",void 0,void 0,i.id+":122")}function g(){return o("MWLSSyncRankings").isDone()&&o("MWChatSearchInsertRankingContacts").isDone()?m.contents:!1}l.makeAll=_,l.clearAll=f,l.isDone=g}),98);
__d("MWChatSearchSurfaces",["LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s={broadcast:(e||(e=o("LSIntEnum"))).ofNumber(6),cmCommunityInviteAllMembers:e.ofNumber(21),cmCommunityInviteFbFriends:e.ofNumber(22),cmInviteAllMembers:e.ofNumber(14),cmInviteFbFriends:e.ofNumber(20),cmMemberList:e.ofNumber(16),cmThreadParticipantSearch:e.ofNumber(17),instagramAll:e.ofNumber(15),omnipicker:e.ofNumber(5),omnipickerArmadillo:e.ofNumber(11),universal:e.ofNumber(1)},u=s;l.default=u}),98);
__d("MNetContactItemType",[],(function(t,n,r,o,a,i){var e=Object.freeze({CONTACT:0,NON_CONTACT:1,GROUP:2,PAGE:3,BOT:4,GAME:5,IG_USER:6,IG_THREAD:7,STICKER:8,INTEROP_THREAD:9,MSGR_THREAD:10,TEXT_SUGGESTION:11,COMMUNITY_MESSAGING_THREAD:12,IG_PUBLIC_CHANNELS:13,SIDE_CONVERSATIONS_COMMUNITY_MESSAGING_THREAD:14,COMMUNITY_MESSAGING_THREAD_FOR_CC_SECTION:15,BROADCAST_CHAT:16,MSGR_PUBLIC_CHANNEL:17,MSGR_SOCIAL_CHANNEL:18,NETEGO_IG_PUBLIC_CHANNELS:19,CONTACT_BIRTHDAY:20});i.default=e}),66);
__d("MWChatSearchFetchCCRecommendations",["fbt","I64","LSIntEnum","LSMessagingThreadTypeUtil","MNetContactItemType","MWChatTemporarySearchResult","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["communityId","contextLine","score","scoreType","secondaryThreadPictureUrl","secondaryThreadPictureUrlFallback","threadKey","threadName","threadPictureUrl","threadPictureUrlFallback","threadType"],u,c,d=3;function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return(u||(u=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(15))?[]:g(yield _(e,d))}),p.apply(this,arguments)}function _(e,t){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.cm_search_nullstate_metadata).filter(function(e){return(u||(u=o("I64"))).equal(e.threadType,(c||(c=o("LSIntEnum"))).ofNumber(18))}));return n.sort(function(e,t){var n=e.score,r=t.score;return n===r?0:n>r?1:-1}).slice(0,t)}),f.apply(this,arguments)}function g(t){return t.map(function(t,n){var a,i,l=t.communityId,d=t.contextLine,m=t.score,p=t.scoreType,_=t.secondaryThreadPictureUrl,f=t.secondaryThreadPictureUrlFallback,g=t.threadKey,h=t.threadName,y=t.threadPictureUrl,C=t.threadPictureUrlFallback,b=t.threadType,v=babelHelpers.objectWithoutPropertiesLoose(t,e),S={contactId:g,contactType:(c||(c=o("LSIntEnum"))).ofNumber(r("MNetContactItemType").COMMUNITY_MESSAGING_THREAD_FOR_CC_SECTION),score:m,scoreIndex:(u||(u=o("I64"))).of_int32(n),scoreType:p};return{communityId:l!=null?(u||(u=o("I64"))).to_string(l):"",displayName:h,id:u.to_string(g),imageUrl:(a=y!=null?y:_)!=null?a:"",isAiBot:u.equal(b,c.ofNumber(201)),isContact:o("LSMessagingThreadTypeUtil").isOneToOne(b),isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(b),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,rankingScore:S,resultType:o("MWChatTemporarySearchResult").getResultType(c.ofNumber(13)),searchSource:"server",secondaryImageUrl:(i=_!=null?_:f)!=null?i:"",section:s._(/*BTDS*/"Your channels").toString(),subtext:d!=null?d:"",threadKey:g,threadType:b}})}l.fetchCCs=m,l.mapToSearchResults=g}),226);
__d("MWChatSearchFetchContactRecommendations",["FBLogger","I64","LSContactBitOffset","LSContactTypeExact","LSContactUtils","LSContactViewerRelationship","LSDatabaseSingleton","LSIntEnum","LSWhatsAppConnectStatus","MAWDefaultE2eeOneToOneEligibility","MNetContactItemType","MNetRankType","MWChatTemporarySearchResult","MWGenAIUtils","MWLSContactTypeExactUtils","ReQL","ReQLSuspense","asyncToGeneratorRuntime","getLSMediaContactProfilePictureUrl","gkx","react","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=(s||(s=o("react"))).useMemo;function p(e){return e<0?-1:e>0?1:0}function _(e){return e.sort(function(e,t){var n=e[0],r=n[0],o=n[1],a=t[0],i=a[0],l=a[1];return i.score!==r.score?p(i.score-r.score):o!=null&&l!=null?p(l.rank-o.rank):l==null&&o==null?0:l!=null?1:-1})}function f(e){var t=e.contactTypeExact,n=e.contactViewerRelationship;return o("MWLSContactTypeExactUtils").isIgContact(t)?(u||(u=o("I64"))).equal(n,(d||(d=o("LSIntEnum"))).ofNumber(r("LSContactViewerRelationship").NOT_CONTACT))?(d||(d=o("LSIntEnum"))).ofNumber(8):(u||(u=o("I64"))).equal(n,(d||(d=o("LSIntEnum"))).ofNumber(r("LSContactViewerRelationship").CONTACT_OF_VIEWER))?(d||(d=o("LSIntEnum"))).ofNumber(6):(d||(d=o("LSIntEnum"))).ofNumber(9):(u||(u=o("I64"))).equal(t,(d||(d=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").GENERATIVE_AI_BOT))?(d||(d=o("LSIntEnum"))).ofNumber(16):(d||(d=o("LSIntEnum"))).ofNumber(1)}function g(e){return e.map(function(e,t){var n,a=e[0],i=a[0],l=a[1],s=e[1];if(l==null||!(l!=null&&l.name)){if(l!=null&&!(l!=null&&l.name)){var c,m;r("FBLogger")("messenger_web_search").warn("Non-null contact without name field found in search results. contact_type: %s; contact_type_exact: %s",(u||(u=o("I64"))).to_string((c=l.contactType)!=null?c:(u||(u=o("I64"))).minus_one),u.to_string((m=l.contactTypeExact)!=null?m:(u||(u=o("I64"))).minus_one))}return}var p=l.contactTypeExact,_=(d||(d=o("LSIntEnum"))).toNumber(i.contactType),g;o("LSContactBitOffset").has(76,l)&&!r("gkx")("2268")?g=15:g=_===r("MNetContactItemType").GROUP?2:1;var h;switch(_){case r("MNetContactItemType").CONTACT:h=f(l);break;case r("MNetContactItemType").GROUP:h=(d||(d=o("LSIntEnum"))).ofNumber(3);break;case r("MNetContactItemType").PAGE:case r("MNetContactItemType").BOT:case r("MNetContactItemType").GAME:case r("MNetContactItemType").STICKER:h=(d||(d=o("LSIntEnum"))).ofNumber(4);break;case r("MNetContactItemType").IG_THREAD:case r("MNetContactItemType").INTEROP_THREAD:case r("MNetContactItemType").MSGR_THREAD:h=(d||(d=o("LSIntEnum"))).ofNumber(5);break;case r("MNetContactItemType").IG_USER:h=(d||(d=o("LSIntEnum"))).ofNumber(6);break;default:h=(d||(d=o("LSIntEnum"))).ofNumber(2)}var y={blockedByViewerStatus:l.blockedByViewerStatus,contextLine:(n=l.secondaryName)!=null?n:"",defaultE2eeThreadOneToOne:o("MAWDefaultE2eeOneToOneEligibility").isContactDefaultE2eeOneToOneEligible({maybeContact:l}),defaultE2eeThreads:o("LSContactBitOffset").has(80,l),displayName:l.name,globalIndex:(u||(u=o("I64"))).of_int32(t),hasCutoverThread:o("LSContactBitOffset").has(76,l),isGroupsXacEligible:o("LSContactBitOffset").has(68,l),isInteropEligible:o("MWLSContactTypeExactUtils").isIgContact(p)?o("LSContactBitOffset").has(67,l):void 0,isVerified:o("LSContactBitOffset").has(23,l),isViewerUnconnected:o("LSContactBitOffset").hasWithDefault(64,l,!0),isWaAddressable:u.equal(l.waConnectStatus,d.ofNumber(r("LSWhatsAppConnectStatus").WHATSAPP_ADDRESSABLE)),profilePicUrl:r("getLSMediaContactProfilePictureUrl")(l),query:"",resultId:u.to_string(l.id),resultIgid:s==null?void 0:s.igId,threadType:d.ofNumber(g),type_:h,waEligibility:s==null?void 0:s.e2eeEligibility},C=o("MWChatTemporarySearchResult").fromServerSearchResult(y,void 0,"offline_nullstate");return[C,l]}).filter(Boolean)}function h(e,t){var n;return(n=o("ReQL")).leftJoin(n.leftJoin(n.fromTableAscending(e.tables.ranking_scores.index("scoreTypeContactId")).getKeyRange(t),n.fromTableAscending(e.tables.contacts)),n.fromTableAscending(e.tables.ig_contact_info))}function y(t){t===void 0&&(t=(d||(d=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE));var n=(e||(e=r("useReStore")))(),a=o("ReQLSuspense").useArray(function(){return h(n,t)},[t,n],i.id+":263");return m(function(){return g(_(a)).filter(function(e){var t=e[0],n=e[1];return t.isAiBot===!1&&o("MWGenAIUtils").isMetaAIContact(t.id)===!1&&!o("LSContactUtils").isContactRestricted(n)})},[a])}function C(e){return e===void 0&&(e=(d||(d=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE)),(c||(c=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(t){return o("ReQL").toArrayAsync(h(t,e))}).then(function(e){return g(_(e)).filter(function(e){var t=e[0],n=e[1];return!o("LSContactUtils").isContactRestricted(n)})})}function b(e,t,n){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("ReQL").toArrayAsync(h(e,t));return g(_(r)).filter(function(e){var t=e[0],r=e[1];return!(o("LSContactUtils").isContactRestricted(r)||((u||(u=o("I64"))).equal(n,(d||(d=o("LSIntEnum"))).ofNumber(5))||(u||(u=o("I64"))).equal(n,(d||(d=o("LSIntEnum"))).ofNumber(11)))&&o("LSContactUtils").isContactBlocked({blockedByViewerStatus:r.blockedByViewerStatus}))}).map(function(e){var t=e[0];return t})}),v.apply(this,arguments)}l.sortInPlaceQueryResults=_,l.mapToServerSearchResults=g,l.makeQuery=h,l.useChatSearchContactRecommendations=y,l.fetchRecommendations=C,l.fetchContacts=b}),98);
__d("MWChatSearchFetchGenAIBotRecommendations",["I64","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MNetContactItemType","MNetRankType","MWChatSearchResultType","MWChatTemporarySearchResultUtils","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=3;function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){return(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(15))?[]:_(yield m(t,u))}),d.apply(this,arguments)}function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.ai_bot_search_metadata));return n.sort(function(e,t){var n=e.score,r=t.score;return n===r?0:n>r?1:-1}).slice(0,t)}),p.apply(this,arguments)}function _(t){return t.map(function(t,n){var a=t.botId,i=t.contactViewerRelationship,l=t.contextLine,u=t.displayName,c=t.displayPictureUrl,d=t.score,m={contactId:a,contactType:(s||(s=o("LSIntEnum"))).ofNumber(r("MNetContactItemType").BOT),score:d,scoreIndex:(e||(e=o("I64"))).of_int32(n),scoreType:s.ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE)};return{displayName:u,id:e.to_string(a),imageUrl:c!=null?c:"",isAiBot:!0,isContact:!0,isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(a),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,isViewerUnconnected:e.equal(i,s.ofNumber(r("LSContactViewerRelationship").NOT_CONTACT)),rankingScore:m,resultType:r("MWChatSearchResultType").AI_BOT,searchSource:"server",secondaryImageUrl:"",section:o("MWChatTemporarySearchResultUtils").getSectionHeaderForAIBot(),subtext:l!=null?l:"",threadKey:a,threadType:e.of_int32(201)}})}l.fetchGenAIBots=c,l.mapToSearchResults=_}),98);
__d("LSIssueSearchQuery",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.db.table(67).fetch([[[e[0],e[4]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(n){return r[1]=t.i64.of_float(Date.now()),t.db.table(67).add({query:e[0],surfaceType:e[4],statusPrimary:t.i64.cast([0,1]),statusSecondary:t.i64.cast([0,1]),startTimeMs:r[1]})},function(o){return r[2]=t.i64.cast([0,0]),r[3]=new t.Map,r[3].set("query",e[0]),r[3].set("supported_types",e[1]),r[3].set("session_id",e[2]),r[3].set("surface_type",e[4]),r[3].set("selected_participants",e[5]),r[3].set("group_id",e[6]),r[3].set("community_id",e[8]),r[3].set("thread_id",e[7]),r[3].set("query_id",e[3]),r[4]=t.createArray(),r[10]=(r[4].push("search_primary"),r[4]),r[5]=t.i64.of_float(Date.now()),r[10]=(r[4].push(t.i64.to_string(r[5])),r[4]),r[6]=t.toJSON(r[4]),r[7]=t.toJSON(r[3]),t.storedProcedure(n("LSIssueNewTask"),r[6],t.i64.cast([0,30]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),r[2])},function(o){return r[8]=new t.Map,r[8].set("query",e[0]),r[8].set("supported_types",e[1]),r[8].set("session_id",e[2]),r[8].set("surface_type",e[4]),r[8].set("selected_participants",e[5]),r[8].set("group_id",e[6]),r[8].set("community_id",e[8]),r[8].set("thread_id",e[7]),r[8].set("query_id",e[3]),r[9]=t.toJSON(r[8]),t.storedProcedure(n("LSIssueNewTask"),"search_secondary",t.i64.cast([0,31]),r[9],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):(a=l.item,0)})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSSearchIssueSearchQueryStoredProcedure",e.__tables__=["search_queries"],a.exports=e}),null);
__d("LSIssueSearchQueryStoredProcedure",["LSIssueSearchQuery","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSIssueSearchQuery"),a.query,a.supportedTypes,a.sessionId,a.queryId,a.surfaceType,a.selectedParticipants,a.groupId,a.threadId,a.communityId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MWChatSearchFetchThreadRecommendations",["I64","LSAuthorityLevel","LSContactBitOffset","LSContactUtils","LSDatabaseAfterInitSyncSingleton","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","LSWhatsAppConnectStatus","MWChatSearchResultType","MWGetOtherContactOrSelf","MWLSThreadTitle","MWSearchThreadUtils","Promise","ReQL","asyncToGeneratorRuntime","hasDefaultThreadOneToOneCapability"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){return o("ReQL").firstExnAsync(o("ReQL").fromTableAscending(e.tables._user_info))}function d(e,t,n,a,i,l,c){var d,p,_=(s||(s=o("I64"))).to_float(t.lastActivityTimestampMs),f={contactId:s.zero,contactType:s.zero,score:_,scoreIndex:s.zero,scoreType:s.zero},g=n.length===2?n.find(function(t){return!(s||(s=o("I64"))).equal(t.contact_id,e)}):null;return{defaultE2eeThreadOneToOne:c!=null?c:void 0,displayName:o("MWLSThreadTitle").getDefaultThreadTitle(t.threadName,e,n,t.threadType).toString(),hasCutoverThread:l!=null?l:void 0,id:s.to_string(t.threadKey),imageUrl:a,isAiBot:s.equal(t.threadType,(u||(u=o("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:o("LSThreadBitOffset").has(214,t),isTTLCClipEnabled:o("LSThreadBitOffset").has(226,t),isTTLCGenericXMAShareEnabled:o("LSThreadBitOffset").has(231,t),isTTLCMediaShareEnabled:o("LSThreadBitOffset").has(228,t),isTTLCStoryShareEnabled:o("LSThreadBitOffset").has(229,t),isVerified:!1,otherUserName:(d=g==null?void 0:g.name)!=null?d:void 0,rankingScore:f,resultType:o("LSMessagingThreadTypeUtil").isGroup(t.threadType)?r("MWChatSearchResultType").GROUP:r("MWChatSearchResultType").USER,searchSource:"offline_nullstate",secondaryImageUrl:i,section:"",subtext:(p=t.threadDescription)!=null?p:"",threadKey:t.threadKey,threadType:t.threadType,waAddressable:o("LSMessagingThreadTypeUtil").isArmadilloSecureOneToOne(t.threadType)?!m(g):void 0}}function m(e){if(e!=null)return e.authority_level!=null&&(s||(s=o("I64"))).ge(e.authority_level,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT))&&e.wa_connect_status!=null&&(s||(s=o("I64"))).equal(e.wa_connect_status,(u||(u=o("LSIntEnum"))).ofNumber(r("LSWhatsAppConnectStatus").WHATSAPP_NOT_ADDRESSABLE))}function p(t){return o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(t.tables.threads.index("parentThreadKeyLastActivityTimestampMs"))).then((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(r){var o=yield(e||(e=n("Promise"))).all(r.map(function(e){return g(t,e)}));return r.filter(function(e,t){return!o[t]})});return function(e){return r.apply(this,arguments)}})())}function _(){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield o("LSDatabaseAfterInitSyncSingleton").LSDatabaseAfterInitSyncSingleton,a=yield(e||(e=n("Promise"))).all([c(t),p(t)]),i=a[0],l=a[1];return e.all(l.map((function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var l=yield(e||(e=n("Promise"))).all([o("MWSearchThreadUtils").getThreadPics(a,i.facebookUserId,t),o("MWSearchThreadUtils").getThreadParticipants(a,t),o("LSMessagingThreadTypeUtil").isOpenOneToOne(a.threadType)?o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.cutover_threads).getKeyRange(a.threadKey)):null,o("LSMessagingThreadTypeUtil").isOpenOneToOne(a.threadType)?r("hasDefaultThreadOneToOneCapability")(a.threadKey,t):null]),s=l[0],u=l[1],c=l[2],m=l[3],p=s[0],_=s[1];return d(i.facebookUserId,a,u,p,_,!!c,m)});return function(e){return a.apply(this,arguments)}})()))}),f.apply(this,arguments)}function g(e,t){return!(o("LSMessagingThreadTypeUtil").isRecentsSectionAllowedTypes(t.threadType)&&o("LSMessagingThreadTypeUtil").isMessengerOrE2EEInbox(t.folderName))||o("LSMessagingThreadTypeUtil").isArmadilloSecureOneToOne(t.threadType)&&(u||(u=o("LSIntEnum"))).toNumber(t.authorityLevel)<r("LSAuthorityLevel").AUTHORITATIVE||o("LSThreadBitOffset").has(44,t)?!0:h(e,t)}function h(e,t){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=yield(e||(e=n("Promise"))).all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.contacts).getKeyRange(r.threadKey)),o("ReQL").firstExnAsync(o("ReQL").fromTableAscending(t.tables._user_info).map(function(e){return e.facebookUserId}))]),i=a[0],l=a[1],s=yield o("MWGetOtherContactOrSelf").getOtherContactOrSelf(r.threadKey,l,t),u=s!=null?s:i,c=!1,d=!1,m=!1;return u&&(c=o("LSContactBitOffset").has(28,u)||o("LSContactBitOffset").has(29,u)||u.blockedByViewerStatus!=null&&o("LSContactUtils").isContactBlocked(u),d=o("LSContactUtils").isContactUnreachable(u),m=o("LSContactUtils").isContactRestricted(u)),c||d||m}),y.apply(this,arguments)}l.fetchThreadRecommendations=_,l.shouldFilterBlockedOrUnreachableUser=h}),98);
__d("MWChatSearchIssueLightspeedQuery",["I64","LSContactBlockedByViewerStatus","LSDatabaseSingleton","LSFactory","LSIntEnum","LSIssueSearchQueryStoredProcedure","LSPlatformWaitForTaskCompletion","LSSearchRequestStatusType","LSVec","MWChatSearchFetchContactRecommendations","MWChatSearchFetchThreadRecommendations","MWChatSearchResultType","MWChatTemporarySearchResult","Promise","ReQL","asyncToGeneratorRuntime","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=r("gkx")("26360");function m(e,t){var n=e[0],a=e[1],i=[],l=0;n.sort(function(e,t){return(s||(s=o("I64"))).compare(e.globalIndex,t.globalIndex)}),a.sort(function(e,t){return(s||(s=o("I64"))).compare(e.globalIndex,t.globalIndex)});for(var u=0,c=n.length;u<c;++u)for(var d=n[u];l<a.length&&(s||(s=o("I64"))).ge(a[l].globalIndex,d.startIndex)&&(s||(s=o("I64"))).le(a[l].globalIndex,d.endIndex);){var m=a[l];i.push(o("MWChatTemporarySearchResult").fromServerSearchResult(m,d,"server")),l+=1}return i.filter(function(e){return t?!0:e.resultType!==r("MWChatSearchResultType").GROUP})}function p(e,t,n){var a=n.query;return(c||(c=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(n){return n.runInTransaction(function(n){return r("LSIssueSearchQueryStoredProcedure")(r("LSFactory")(n),{query:a,supportedTypes:r("LSVec").ofArray(e),surfaceType:t})},"readwrite",void 0,void 0,i.id+":105").then(function(){return n})})}function _(t,a,i,l,d){var p=d.query;return a.length>0&&!a.includes("server")?(e||(e=n("Promise"))).resolve([]):(c||(c=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(e){return r("LSPlatformWaitForTaskCompletion")(e,function(e){return r("LSIssueSearchQueryStoredProcedure")(r("LSFactory")(e),{query:p,supportedTypes:r("LSVec").ofArray(t),surfaceType:i})},"issueSearchQuery").then(function(){return e})}).then((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a,i=(a=o("ReQL")).toArrayAsync(a.fromTableAscending(t.tables.server_search_results).getKeyRange(p).filter(function(e){return(s||(s=o("I64"))).equal(e.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED))})),c=a.toArrayAsync(a.fromTableAscending(t.tables.server_search_sections).getKeyRange(p)),d=yield(e||(e=n("Promise"))).all([c,i]);return m(d,l)});return function(e){return t.apply(this,arguments)}})())}function f(t,r,a,i){return o("MWChatSearchFetchContactRecommendations").fetchRecommendations(i).then(function(t){return(e||(e=n("Promise"))).resolve(t.map(function(e){var t=e[0];return t}))})}function g(e,t){return!!(!t.has(e.resultType)||!e.isE2EE&&e.defaultE2eeThreadOneToOne===!0||e.hasCutoverThread===!0||e.isAiBot)}function h(e){var t=[],n=new Set;return e.forEach(function(e){n.has(e.id)||(t.push(e),n.add(e.id))}),t}function y(){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("MWChatSearchFetchThreadRecommendations").fetchThreadRecommendations();if(e.length===0)return[];var t=new Set([r("MWChatSearchResultType").USER,r("MWChatSearchResultType").GROUP]),n=h(e);return n.filter(function(e){return!g(e,t)})}),C.apply(this,arguments)}function b(e,t,n,a){var i=[],l=[],c=[],d=function(){i.length===0||l.length===0||c.length!==1||(s||(s=o("I64"))).equal(c[0].statusPrimary,(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING))||a(m([l,i],n))},p=e.tables.server_search_results.subscribe(function(){r("promiseDone")(o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.server_search_results).getKeyRange(t)),function(e){return i=e,d()})}),_=e.tables.server_search_sections.subscribe(function(){r("promiseDone")(o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.server_search_sections).getKeyRange(t)),function(e){return l=e,d()})}),f=e.tables.search_queries.subscribe(function(){r("promiseDone")(o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.search_queries).getKeyRange(t).filter(function(e){return!(s||(s=o("I64"))).equal(e.statusPrimary,(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING))})),function(e){return c=e,d()})});return function(){p(),_(),f()}}function v(t,a,i,l){return t.tables.search_queries.subscribe(function(c,d){var p=c[0];p!==a||d.operation==="delete"||(s||(s=o("I64"))).equal(d.value.statusPrimary,(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING))||r("promiseDone")((e||(e=n("Promise"))).all([o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.server_search_results).getKeyRange(a)),o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.server_search_sections).getKeyRange(a))]).then(function(e){var t=e[0],n=e[1];l(m([n,t],i))}))})}function S(e,t,n,a,i,l){var c=i.query;return d?r("promiseDone")(o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.search_queries).getKeyRange(c).filter(function(e){return!(s||(s=o("I64"))).equal(e.statusPrimary,(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING))})).then(function(r){return r==null||r.length!==1?p(t,n,i):o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.server_search_results).getKeyRange(c)).then(function(r){return r==null||r.length===0?p(t,n,i):o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.server_search_sections).getKeyRange(c)).then(function(e){if(e==null||e.length===0)return p(t,n,i);l(m([e,r],a))})})})):r("promiseDone")(p(t,n,i)),b(e,i.query,a,l)}function R(e,t,n,o,a,l){var s=v(e,a.query,o,l);return r("promiseDone")(e.runInTransaction(function(e){return e.search_queries.delete(a.query,n)},"readwrite",void 0,void 0,i.id+":436").then(function(){return p(t,n,a)})),s}l.toSearchResults=m,l.makeSearchQuery=p,l.fetchResults=_,l.fetchRecommendations=f,l.shouldFilterSearchResultsForSharingNS=g,l.dedupeByThreadKey=h,l.fetchThreadRecommendations=y,l.requestResults=S,l.requestResults_T200619723=R}),98);
__d("MWChatSearchFetchRecommendations",["I64","LSInitSyncCompleteSubscription","LSIntEnum","MWChatSearchFetchCCRecommendations","MWChatSearchFetchContactRecommendations","MWChatSearchFetchGenAIBotRecommendations","MWChatSearchIssueLightspeedQuery","Promise","cr:8409","emptyFunction","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,a,i,l,c){var d=a.includes((u||(u=o("LSIntEnum"))).ofNumber(13)),p=a.includes(u.ofNumber(16));r("promiseDone")((e||(e=n("Promise"))).all([(s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(1))&&n("cr:8409")!=null?n("cr:8409").fetchNullStateRecentSearches(t):(e||(e=n("Promise"))).resolve([]),o("MWChatSearchFetchContactRecommendations").fetchContacts(t,i,l),d?o("MWChatSearchFetchCCRecommendations").fetchCCs(t,l):[],p?o("MWChatSearchFetchGenAIBotRecommendations").fetchGenAIBots(t,l):[]]).then(function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=m(t,n,r,o);return c(a)}))}function d(e,t,n,a,i,l){return r("promiseDone")(o("MWChatSearchIssueLightspeedQuery").makeSearchQuery(t,a,i)),r("gkx")("15587")?r("promiseDone")(o("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(e,(u||(u=o("LSIntEnum"))).ofNumber(7)),function(){c(e,t,n,a,l)}):c(e,t,n,a,l),r("emptyFunction")}function m(e,t,n,r){return[].concat(e,r,n,t)}l.requestRecommendations=d,l.blendSearchResults=m}),98);
__d("MWChatSearchFilteringUtils",["I64","LSMessagingThreadTypeUtil","MAWVerifyThreadCutover","MWChatSearchResultType","MWChatSearchSurfaces","MessengerMSplitFlag","Promise","asyncToGeneratorRuntime","hasDefaultThreadOneToOneCapability"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n=e.map(function(e){return e.searchSource==="server"?!1:!!(p(e,t)||m(e))}),r=e.filter(function(e,t){return n[t]===!1});return r}function c(e,t,n,r,o){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r,o,a){r===void 0&&(r=!1),o===void 0&&(o=!0),a===void 0&&(a=!1);var i=e;if(r&&(i=e.filter(function(e){var t=e.key,n=e.rawData;return n.isE2EE})),t==null)return i;var l=yield(s||(s=n("Promise"))).all(i.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return!((yield y(e,t))||(yield b(e,t,r,o))||a&&e.rawData.isAiBot===!0||f(e)||_(e)||R(e))});return function(t){return e.apply(this,arguments)}})())),u=e.filter(function(e,t){return l[t]});return u}),d.apply(this,arguments)}function m(e){return e.isContact===!0&&e.isViewerUnconnected===!0}function p(e,t){return t===r("MWChatSearchSurfaces").instagramAll?!1:e.isInstagramAccount===!0}function _(e){var t=e.rawData,n=t.canViewerMessage,r=t.isRestrictedByViewer;return r!==!0&&n===!1}function f(e){var t=e.rawData,n=t.isAiBot,o=t.isViewerUnconnected;return n!==!0?!1:r("MessengerMSplitFlag").is_msplit_account||o!==!1}function g(e){var t=[],n=new Set;return e.forEach(function(e){n.has(e.key)||(t.push(e),n.add(e.key))}),t}function h(e,t){return t!=null?o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType):e!=null?e.isE2EE===!0:!1}function y(e,t){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var a=t.rawData,i=a.defaultE2eeThreadOneToOne,l=a.id,s=a.isE2EE,u=a.otherUserId,c=a.threadType;return!s||c==null||!o("LSMessagingThreadTypeUtil").isArmadilloSecureOneToOne(c)?!1:i===!0?!0:yield r("hasDefaultThreadOneToOneCapability")((e||(e=o("I64"))).of_string_opt(u!=null?u:l),n)}),C.apply(this,arguments)}function b(e,t,r,o){return o===void 0&&(o=!0),r?(s||(s=n("Promise"))).resolve(!1):o?v(e,t):(s||(s=n("Promise"))).resolve(!1)}function v(e,t){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){var i=t.rawData;if(i.resultType!==r("MWChatSearchResultType").GROUP||a==null)return!1;var l=i.hasCutoverThread,u=i.isE2EE,c=i.otherUserId;if(!u)return!1;if(c!=null){if(l===!0)return!0;var d=yield o("MAWVerifyThreadCutover").verifyThreadCutover((s||(s=n("Promise"))).resolve(a),(e||(e=o("I64"))).of_string(c));return d}return!1}),S.apply(this,arguments)}function R(e){var t=e.rawData.isRestrictedByViewer;return t===!0}l.filterLocalSearchResults=u,l.filterSearchResults=c,l.dedupeByThreadKey=g,l.getIsE2ee=h}),98);
__d("MWLSSearchIssueSearchQuerySupportedTypes",["LSIntEnum","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[(e||(e=o("LSIntEnum"))).ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9),e.ofNumber(13)].concat(r("gkx")("24112")?[(e||(e=o("LSIntEnum"))).ofNumber(14)]:[]),u=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2)],c=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9),e.ofNumber(5)],d=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)],m=[e.ofNumber(1)],p=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)].concat([e.ofNumber(13)]),_=[e.ofNumber(1),e.ofNumber(2)],f=[e.ofNumber(1),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)],g=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(2)],h=[e.ofNumber(1),e.ofNumber(2)];l.allSupportedTypes=s,l.supportedTypesForMSplitUser=u,l.allSupportedTypesWithMessageSearch=c,l.armadilloSupportedTypes=d,l.onlyContacts=m,l.broadcastFlowSupportedTypes=p,l.addParticipantBase=_,l.addParticipantXac=f,l.socialChannelsSupportedTypes=g,l.communityDirectInviteSupportedTypes=h}),98);
__d("LsUniversalSearchDataSource",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({LOCAL_BLENDED:0,SERVER_ENTITIES_NAMED_DSQ1:1,SERVER_ENTITIES_NAMED_DSQ2:2}),l=e;i.default=l}),66);
__d("LsUniversalSearchThreadType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({ARMADILLO:0,TINCAN:1,OPEN_THREAD:2}),l=e;i.default=l}),66);
__d("SearchTransportType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({ARMADILLO:1,TINCAN:2,OPEN_THREAD:3,IG_DJANGO:4,IG_ADVANCED_CRYPTO_TRANSPORT:5,IG_MESSENGER_INFRA:6}),l=e;i.default=l}),66);
__d("UniversalSearchEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("844"),s=o("FalcoLoggerInternal").create("universal_search_end",e),u=s;l.default=u}),98);
__d("UniversalSearchResultSelectedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("846"),s=o("FalcoLoggerInternal").create("universal_search_result_selected",e),u=s;l.default=u}),98);
__d("UniversalSearchUISectionType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({NULL_STATE_RECENTS:1,NULL_STATE_RECENTS_SEE_ALL:2,NULL_STATE_SUGGESTED:3,NULL_STATE_XAC_FOLLOWING:4,QUERY_SUGGESTED:5,QUERY_NON_FOLLOWING:6,QUERY_XAC_FOLLOWING:7,QUERY_XAC_NON_FOLLOWING:8,QUERY_BUSINESSES:9,QUERY_MESSAGES:10,OTHER:11,QUERY_NON_BUSINESSES:12,COMMUNITY_CHATS:13,MORE_COMMUNITY_CHATS:14,RELEVANT_SHARES:15,LATEST_SHARES:16,RECOMMENDED_COMMUNITIES:17,COMMUNITIES_AND_MORE:18,CHANNELS:19,NULL_STATE_NON_FOLLOWING:20,JOINED_CM_AND_CHANNEL:21,JOINED_CM_AND_CHANNEL_SEE_MORE:22,RECOMMENDED_CM_AND_CHANNEL:23,RECOMMENDED_CM_AND_CHANNEL_SEE_MORE:24,AI:25,AI_SEE_MORE:26,CHANNELS_SEE_MORE:27,UNJOINED_COMMUNITY_CHATS:28,MORE_UNJOINED_COMMUNITY_CHATS:29,NS_SUGGESTED_CHANNELS:30,NS_SUGGESTED_CHANNELS_SEE_MORE:31,NULL_STATE_MESSAGES:32,NULL_STATE_SUGGESTED_PROMPT:33,NULL_STATE_PYMK:34,QUERY_SUGGESTED_PROMPT:35,INVITE_TO_INSTAGRAM:36,INVITE_TO_INSTAGRAM_SEE_MORE:37,NULL_STATE_GROUP_CHATS:38,NULL_STATE_GROUP_CHATS_SEE_MORE:39,QUERY_NON_FOLLOWING_SEE_MORE:40,META_AI_SNIPPET:41,QUERY_BUSINESSES_SEE_MORE:42,QUERY_MESSAGES_SEE_MORE:43,PHOTOS_AND_VIDEOS:44,PHOTOS_AND_VIDEOS_SEE_MORE:45,LINKS:46,LINKS_SEE_MORE:47,FILES:48,FILES_SEE_MORE:49,PHONE_CONTACTS:50,PHONE_CONTACTS_SEE_MORE:51,NOT_IN_PHONE_CONTACTS:52,NULL_STATE_SUGGESTED_REELS:53,NULL_STATE_NOTIFICATIONS:54}),l=e;i.default=l}),66);
__d("MWSearchLogging",["$InternalEnum","I64","LSMessagingThreadTypeUtil","MWChatSearchResultType","UniversalSearchEndFalcoEvent","UniversalSearchResultSelectedFalcoEvent","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("$InternalEnum")({CM_THREADS:"cm_threads",UNJOINED_GROUPS:"unjoined_groups",NON_CONTACTS:"noncontacts",PAGES:"pages",CONTACTS_GROUPS:"contacts_groups",MESSAGE_SEARCH:"message_search"}),u=function(t){switch(t){case"server":return[1,2];case"offline":case"offline_nullstate":case"secure":return[0];default:return[]}};function c(e){return e===!0?1:3}function d(e){return e===!0?0:2}function m(e,t){var n=t.searchSource,r=t.section,o=t.sectionAnalyticsName;if(e==="")return n==="null_state_recent"?1:3;if(s.cast(o)===s.MESSAGE_SEARCH)return 10;if(n!=="server"||r==="")return 5;var a=s.cast(o);if(a==null)return 11;switch(a){case s.CM_THREADS:return 13;case s.CONTACTS_GROUPS:return 5;case s.NON_CONTACTS:return 6;case s.PAGES:return 9;default:return 11}}function p(e){return(e!=null?e:-1).toString()}function _(t,n,a,i){var l=a.rawData,s=l.id,d=l.isE2EE,_=l.isEPD,f=l.renderIndex,g=l.searchResultType,h=l.searchSource,y=l.serverSearchResult,C=p(f),b=s,v=c(d);if(y!=null){var S;b=(S=y.resultId)!=null?S:b,v=o("LSMessagingThreadTypeUtil").isArmadilloSecure(y==null?void 0:y.threadType)?1:3,C=(e||(e=o("I64"))).to_string(y.globalIndex)}if(r("UniversalSearchResultSelectedFalcoEvent").log(function(){return{data_sources:u(h),is_epd:r("gkx")("23390")||_,search_result:{query_string:n,result_fbid:b,result_index:C,result_type:g!=null?g:7},session_id:t,transport_type:v,ui_section:m(n,l)}}),!i.current){var R=7;a.rawData.resultType===r("MWChatSearchResultType").MESSAGE&&(R=23),r("UniversalSearchEndFalcoEvent").log(function(){return{end_action:R,is_epd:r("gkx")("24110")||_,session_id:t,transport_type:v}}),i.current=!0}}l.SectionAnalyticsNameType=s,l.getLoggingDataSources=u,l.getTransportType=c,l.getLsTransportType=d,l.mapSectionToSearchUISection=m,l.logResultSelected=_}),98);
__d("MWStaticSearchEntries",["fbt","MWChatSearchResultType","MWSearchLogging"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){var t=s._(/*BTDS*/"Search messages for {param}",[s._param("param",e)]).toString();return{key:e,label:t,rawData:{displayName:t,id:"0",imageUrl:"",isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:!1,isEPD:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,resultType:r("MWChatSearchResultType").MESSAGE,searchResultType:14,secondaryImageUrl:"",sectionAnalyticsName:o("MWSearchLogging").SectionAnalyticsNameType.MESSAGE_SEARCH,subtext:""},type:"entry"}}l.createMessageSearchHeaderEntry=e}),226);
__d("createMWChatSearchTypeaheadDataEntry",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n;return{key:e.id,label:e.displayName,rawData:{canViewerMessage:e.canViewerMessage,communityId:e.communityId,defaultE2eeThreadOneToOne:e.defaultE2eeThreadOneToOne,defaultE2eeThreads:e.defaultE2eeThreads,displayName:e.displayName,hasCutoverThread:e.hasCutoverThread,id:e.id,igid:e.resultIgid,imageUrl:e.imageUrl,isAiBot:e.isAiBot,isContact:e.isContact,isDisappearingModeSettingOn:e.isDisappearingModeSettingOn,isE2EE:e.isE2EE,isEPD:e.isEPD,isGroupCreationReachable:e.isGroupCreationReachable,isGroupsXacEligible:!!e.isGroupsXacEligible,isInstagramAccount:!!e.isInstagramAccount,isInstamadilloCutover:e.isInstamadilloCutover,isInteropEligible:e.isInteropEligible!==!1,isRestrictedByViewer:e.isRestrictedByViewer,isTTLCClipEnabled:!!e.isTTLCClipEnabled,isTTLCGenericXMAShareEnabled:!!e.isTTLCGenericXMAShareEnabled,isTTLCMediaShareEnabled:!!e.isTTLCMediaShareEnabled,isTTLCStoryShareEnabled:!!e.isTTLCStoryShareEnabled,isViewerUnconnected:e.isViewerUnconnected,isWAEligible:e.isWAEligible,otherUserId:e.otherUserId,rankingScore:e.rankingScore,reachabilityStatus:e.reachabilityStatus,renderIndex:t,resultType:e.resultType,searchResultType:e.searchResultType,searchSource:e.searchSource,secondaryImageUrl:(n=e.secondaryImageUrl)!=null?n:"",section:e.section,sectionAnalyticsName:e.sectionAnalyticsName,serverSearchResult:e.serverSearchResult,subtext:e.subtext,subtextAdditional:e.subtextAdditional,supportsE2eeSpamdStorage:e.supportsE2eeSpamdStorage,threadType:e.threadType,verificationStatus:e.isVerified?"BLUE_VERIFIED":"NOT_VERIFIED",waAddressable:e.waAddressable,waEligibility:e.waEligibility},type:"entry"}}i.default=e}),66);
__d("filterInstagramContactsMWChatSearchLocalEntries",["MWChatSearchSurfaces"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return t===r("MWChatSearchSurfaces").instagramAll?e:e.filter(function(e){return!e.isInstagramAccount})}l.default=e}),98);
__d("mwChatSearchPayloadDecoratorRemoveExcluded",[],(function(t,n,r,o,a,i){"use strict";var e=["entries"];function l(t){return function(n){var r=n.entries,o=babelHelpers.objectWithoutPropertiesLoose(n,e);return babelHelpers.extends({entries:r.filter(function(e){return!t.includes(e.key)})},o)}}i.default=l}),66);
__d("mwChatSearchPayloadEnumerate",[],(function(t,n,r,o,a,i){"use strict";var e=["entries"];function l(t){var n,r=t.entries,o=babelHelpers.objectWithoutPropertiesLoose(t,e),a=(n=t.params)==null?void 0:n.query,i=r.reduce(function(e,t,n){var r=t.rawData.section;if(r==null)return e;r===""&&e.set(r,0);var o=e.get(r),a=o==null?n:Math.min(o,n);return e.set(r,a),e},new Map),l=r.map(function(e,t){var n=e.key,r=e.label,o=e.rawData,l=o.section;return{key:n,label:r,rawData:babelHelpers.extends({},o,{query:a,renderIndex:t,sectionRenderIndex:l==null?-1:i.get(l)}),type:"entry"}});return babelHelpers.extends({entries:l},o)}i.default=l}),66);
__d("sortMWChatSearchLocalResults",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e={group:1,message:2,messages:3,page:4,user:0},s=r("gkx")("23913");function u(t,n){var r={};for(var o of t){var a;r[o.id]=(a=o.rankingScore)==null?void 0:a.score}var i=t.sort(function(t,o){var a,i,l=e[t.resultType],u=e[o.resultType];if(l!==u)return l-u;if(s&&n.length>1){var c,d,m,p,_=(c=(d=t.matchedTerms)==null?void 0:d.length)!=null?c:0,f=(m=(p=o.matchedTerms)==null?void 0:p.length)!=null?m:0;if(f!==_)return f-_}var g=(a=r[t.id])!=null?a:0,h=(i=r[o.id])!=null?i:0;return h-g});return i}l.default=u}),98);
__d("MWChatSearchTypeaheadLightspeedSubscriptionDataSource",["FBLogger","I64","LSIntEnum","MNetRankType","MWChatSearchFetchRecommendations","MWChatSearchFilteringUtils","MWChatSearchIssueLightspeedQuery","MWChatSearchSurfaces","MWLSSearchIssueSearchQuerySupportedTypes","MWPSearchOfflineOpenConversationsUtils","MWPSearchSystem","MWSearchQPLLogger","MWStaticSearchEntries","Promise","asyncToGeneratorRuntime","cr:3752","createMWChatSearchTypeaheadDataEntry","filterInstagramContactsMWChatSearchLocalEntries","gkx","isArmadillo","justknobx","mwChatSearchPayloadDecoratorRemoveExcluded","mwChatSearchPayloadEnumerate","promiseDone","relay-runtime/network/RelayObservable","sortMWChatSearchLocalResults"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=10,d=10,m=r("isArmadillo")(),p=(function(){function t(e){var t=e.database,n=e.excludedIDs,a=n===void 0?[]:n,i=e.lightspeedSupportedTypes,l=i===void 0?o("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes:i,u=e.source,c=u===void 0?r("MWChatSearchSurfaces").universal:u,d=e.includeRecommendations,m=d===void 0?!0:d,p=e.includeGroupSearch,_=p===void 0?!1:p,f=e.includeMessageSearchEntry,g=f===void 0?!0:f,h=e.nullstateRankType,y=h===void 0?r("gkx")("17703")?(s||(s=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_SEARCH_NULL_STATE_UNBLENDED):(s||(s=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE):h,C=e.includeAiBots,b=C===void 0?!0:C;this.$1=[],this.$5=function(){},this.$1=a,this.$2=c===r("MWChatSearchSurfaces").omnipickerArmadillo?o("MWLSSearchIssueSearchQuerySupportedTypes").armadilloSupportedTypes:l,this.$3=c,this.$4=t,this.$6=m,this.$7=_,this.$8=g,this.$9=y,this.$10=b,o("MWPSearchSystem").makeAll(t)}var a=t.prototype;return a.resolveData=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.map(r("createMWChatSearchTypeaheadDataEntry")),a=[].concat(this.$8&&e.query.length>1?[o("MWStaticSearchEntries").createMessageSearchHeaderEntry(e.query)]:[],n),i=o("MWChatSearchFilteringUtils").dedupeByThreadKey(a),l=yield o("MWChatSearchFilteringUtils").filterSearchResults(i,this.$4,!1,m,!this.$10),s=r("mwChatSearchPayloadDecoratorRemoveExcluded")(this.$1);return r("mwChatSearchPayloadEnumerate")(s({entries:l,params:e}))});function t(t,n){return e.apply(this,arguments)}return t})(),a.fetchNetwork=function(a){var t=this;return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddAnnotations({annotations:{bool:{include_group_search:this.$7},int:{source:(u||(u=o("I64"))).to_int32(this.$3)}}}),this.$5(),r("relay-runtime/network/RelayObservable").create(function(i){if(a.query.length===0){t.$5=t.fetchNullstateResults(a,i);return}var l=[],s=[],u=!1;o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{query_length:a.query.length}},point:"local_query_start"});var c=(e||(e=n("Promise"))).allSettled(t.issueLocalSearchQuery(a)).then((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=e[0],c=e[1],d=n.status==="fulfilled"?n.value:[],m=c.status==="fulfilled"?c.value:[];o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{offline_search_results_count:m.length,secure_search_results_count:d.length}},point:"local_query_end"}),l=t.transformLocalSearchResults(d,m),l=r("sortMWChatSearchLocalResults")(l,a.query),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_start"});var p=yield t.resolveData(a,l.concat(s));o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_end"}),u||i.next(p)});return function(t){return e.apply(this,arguments)}})()).catch(function(e){r("FBLogger")("messenger_search").catching(e).mustfix("Error performing MWChatSearchIssueMAWFTSQuery.fetchResults")}),d=o("MWChatSearchIssueLightspeedQuery").requestResults_T200619723;r("justknobx")._("2003")&&(d=o("MWChatSearchIssueLightspeedQuery").requestResults),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"server_query_start"});var m=d(t.$4,t.$2,t.$3,t.$7,a,function(u){o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{server_search_results_count:u.length}},point:"server_query_end"}),s=u;var d=a.query.length>0&&o("MWPSearchSystem").isDone(),m=d?c:(e||(e=n("Promise"))).resolve();o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{bool:{wait_for_local_search:d}},point:"wait_for_local_search_start"}),r("promiseDone")(m.finally(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"wait_for_local_search_end"}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_start"});var e=yield t.resolveData(a,l.concat(s));o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{total_results_count:e.entries.length}},point:"resolve_data_end"}),i.next(e),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplSuccess(),i.complete()})))});t.$5=function(){m(),u=!0}})},a.issueLocalSearchQuery=function(a){return[n("cr:3752")!=null?n("cr:3752").fetchResults(this.$2,this.$3,this.$7,a):(e||(e=n("Promise"))).resolve([]),this.$3!==r("MWChatSearchSurfaces").broadcast?o("MWPSearchOfflineOpenConversationsUtils").search(a.query,this.$7):(e||(e=n("Promise"))).resolve([])]},a.transformLocalSearchResults=function(t,n){var e=c<=0?n:n.slice(0,c),r=d<=0?t:t.slice(0,d);return e.concat(r)},a.fetchNullstateResults=function(t,a){var e=this;return this.$6?(o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{bool:{should_fetch_community_chats:this.$2.includes((s||(s=o("LSIntEnum"))).ofNumber(13)),should_fetch_genai_bots:this.$2.includes((s||(s=o("LSIntEnum"))).ofNumber(16))},int:{null_state_rank_type:(u||(u=o("I64"))).to_int32(this.$9)}},point:"null_state_query_start"}),o("MWChatSearchFetchRecommendations").requestRecommendations(this.$4,this.$2,this.$9,this.$3,t,(function(){var i=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var i=r("filterInstagramContactsMWChatSearchLocalEntries")(n,e.$3);o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"null_state_query_end"}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_start"});var l=yield e.resolveData(t,i);o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{null_state_results_count:l.entries.length}},point:"resolve_data_end"}),a.next(l),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplSuccess(),a.complete()});return function(e){return i.apply(this,arguments)}})())):(a.next({entries:[],params:t}),a.complete(),function(){})},a.setExcludedIds=function(t){this.$1=t},t})();l.default=p}),98);
__d("useIGDCandidateSearchDataSource",["LSIntEnum","MNetRankType","MWChatSearchSurfaces","MWChatSearchTypeaheadLightspeedSubscriptionDataSource","MWLSSearchIssueSearchQuerySupportedTypes","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=t.excludedIDs,a=t.includeGroupSearch,i=(s||(s=r("useReStore")))();return new(r("MWChatSearchTypeaheadLightspeedSubscriptionDataSource"))({database:i,excludedIDs:n,includeGroupSearch:a,includeRecommendations:!0,lightspeedSupportedTypes:o("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes,nullstateRankType:(e||(e=o("LSIntEnum"))).ofNumber(r("MNetRankType").INSTAGRAM_DIRECT_SEARCH_NULLSTATE),source:r("MWChatSearchSurfaces").instagramAll})}l.default=u}),98);
__d("useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef,m=s.useState;function p(e,t){var n=e.dataSource;t===void 0&&(t=!1);var r=m(t),o=r[0],a=r[1],i=d(null),l=u(function(e){var t,r=e.onResolvePayload,o=e.requestParams;(t=i.current)==null||t.unsubscribe(),i.current=n.fetchNetwork(o).subscribe({complete:function(){a(!1)},error:function(t){a(!1)},next:function(t){return r(t)},start:function(t){a(!0)},unsubscribe:function(){a(!1)}})},[n]);return c(function(){return function(){var e;(e=i.current)==null||e.unsubscribe()}},[]),[{isLoading:o},l]}l.default=p}),98);
__d("useIGDCandidateSearchResults",["IGDAWContactSearchConversionUtils","react","useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork","useDebouncedComet"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useState;function m(e,t){var n=d(function(){return new Map}),a=n[0],i=n[1],l=r("useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork")({dataSource:t},!0),s=l[0].isLoading,m=l[1],p=r("useDebouncedComet")(m),_=u(function(e){i(o("IGDAWContactSearchConversionUtils").covertMWContactSearchResultsToIGDCandidates(e.entries.map(function(e){return babelHelpers.extends({},e)})))},[]);return c(function(){p({onResolvePayload:_,requestParams:{query:e,requestFlow:"network-upon-approve"}})},[_,e,p]),[{isLoading:s},a]}l.default=m}),98);
__d("IGDChatSearchFetchThreadRecommendations",["DisappearingMessagesMode","I64","LSContactBitOffset","LSContactTypeExact","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWChatSearchResultType","MWLSThreadTitle","MWSearchThreadUtils","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime","getLSMediaContactProfilePictureUrl","promiseDone","react","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=u||(u=o("react")),p=m.useEffect,_=m.useState;function f(e){return o("ReQL").firstExnAsync(o("ReQL").fromTableAscending(e.tables._user_info).map(function(e){return e.facebookUserId}))}function g(e,t,n){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.participants).getKeyRange(t).filter(function(t){return!(d||(d=o("I64"))).equal(t.contactId,e)}).map(function(e){return e.contactId}));return r==null?null:o("ReQL").firstAsync(o("ReQL").mergeJoin(o("ReQL").fromTableAscending(n.tables.contacts).getKeyRange(r),o("ReQL").fromTableAscending(n.tables.ig_contact_info).getKeyRange(r)))}),h.apply(this,arguments)}function y(e){return o("ReQL").leftJoin(o("ReQL").fromTableAscending(e.tables.threads),o("ReQL").fromTableAscending(e.tables.ig_thread_info)).filter(function(e){var t=e[0];return o("LSMessagingThreadTypeUtil").isMessengerOrE2EEInbox(t.folderName)&&t.cannotReplyReason!=="viewer_not_subscribed"&&t.cannotReplyReason!=="read_only"})}function C(e,t,n){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a){var i,l=yield f(a),u=yield(s||(s=n("Promise"))).all([o("MWSearchThreadUtils").getThreadParticipants(e,a),o("MWSearchThreadUtils").getThreadPics(e,l,a)]),m=u[0],p=u[1],_=p[0],g=p[1],h=o("MWLSThreadTitle").getDefaultThreadTitle(e.threadName,l,m,e.threadType),y=o("MWLSThreadTitle").getThreadTitleWithSecondaryNames(e.threadDescription,l,m,e.threadType),C={contactId:(d||(d=o("I64"))).zero,contactType:d.zero,score:d.to_float(e.lastActivityTimestampMs),scoreIndex:d.zero,scoreType:d.zero};return{displayName:h,id:d.to_string(e.threadKey),imageUrl:_,isAiBot:d.equal(e.threadType,(c||(c=o("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:d.to_int32((i=t==null?void 0:t.igDmSettingsMode)!=null?i:(d||(d=o("I64"))).zero)===r("DisappearingMessagesMode").ON,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:o("LSThreadBitOffset").has(214,e),isTTLCClipEnabled:o("LSThreadBitOffset").has(226,e),isTTLCGenericXMAShareEnabled:o("LSThreadBitOffset").has(231,e),isTTLCMediaShareEnabled:o("LSThreadBitOffset").has(228,e),isTTLCStoryShareEnabled:o("LSThreadBitOffset").has(229,e),isVerified:!1,rankingScore:C,resultIgid:(t==null?void 0:t.igThreadId)||"",resultType:r("MWChatSearchResultType").GROUP,searchSource:"offline_nullstate",secondaryImageUrl:g,section:"",subtext:y}}),b.apply(this,arguments)}function v(e,t,n){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a,i,l=yield f(n),s=yield g(l,e.threadKey,n);if(s==null)return null;var u=s[0],m=s[1],p=r("getLSMediaContactProfilePictureUrl")(u),_={contactId:(d||(d=o("I64"))).zero,contactType:d.zero,score:d.to_float(e.lastActivityTimestampMs),scoreIndex:d.zero,scoreType:d.zero};return{displayName:u.name,id:d.to_string(e.threadKey),imageUrl:p,isAiBot:d.equal(u.contactTypeExact,(c||(c=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").GENERATIVE_AI_BOT)),isContact:!0,isDisappearingModeSettingOn:d.to_int32((a=t==null?void 0:t.igDmSettingsMode)!=null?a:(d||(d=o("I64"))).zero)===r("DisappearingMessagesMode").ON,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType),isEPD:!1,isInstagramAccount:!0,isInstamadilloCutover:o("LSThreadBitOffset").has(214,e),isTTLCClipEnabled:o("LSThreadBitOffset").has(226,e),isTTLCGenericXMAShareEnabled:o("LSThreadBitOffset").has(231,e),isTTLCMediaShareEnabled:o("LSThreadBitOffset").has(228,e),isTTLCStoryShareEnabled:o("LSThreadBitOffset").has(229,e),isVerified:o("LSContactBitOffset").has(23,u),rankingScore:_,reachabilityStatus:u.contactReachabilityStatusType,resultIgid:m.igId,resultType:r("MWChatSearchResultType").USER,searchSource:"offline_nullstate",section:"",subtext:(i=u.secondaryName)!=null?i:"",waEligibility:m==null?void 0:m.e2eeEligibility}}),S.apply(this,arguments)}function R(e,t){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var r=yield(s||(s=n("Promise"))).all(e.map(function(e){var n=e[0],r=e[1],a=o("LSMessagingThreadTypeUtil").isOneToOne(n.threadType);return a?v(n,r,t):C(n,r,t)}));return r.filter(Boolean).filter(function(e){return!e.isAiBot}).sort(function(e,t){return e.rankingScore==null?1:t.rankingScore==null?-1:t.rankingScore.score-e.rankingScore.score})}),L.apply(this,arguments)}function E(){var t=_([]),a=t[0],l=t[1],s=(e||(e=r("useReStore")))(),u=o("ReQLSuspense").useArray(function(){return y(s)},[s],i.id+":318");return p(function(){var e=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield R(u,s);l(e)});return function(){return e.apply(this,arguments)}})();r("promiseDone")(e())},[s,u]),a}l.useChatSearchThreadRecommendations=E}),98);
__d("useIGDSharesheetThreadRecommendations",["IGDAWContactSearchConversionUtils","IGDChatSearchFetchThreadRecommendations","createMWChatSearchTypeaheadDataEntry"],(function(t,n,r,o,a,i,l){"use strict";var e=["ttlcMessageType"],s=["rawData"];function u(){var e=o("IGDChatSearchFetchThreadRecommendations").useChatSearchThreadRecommendations().map(c);return o("IGDAWContactSearchConversionUtils").covertMWContactSearchResultsToIGDCandidates(e)}function c(t,n){var o=t.ttlcMessageType,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=r("createMWChatSearchTypeaheadDataEntry")(a,n),l=i.rawData,u=babelHelpers.objectWithoutPropertiesLoose(i,s);return babelHelpers.extends({},u,{rawData:babelHelpers.extends({},l,{ttlcMessageType:o})})}l.useIGDSharesheetThreadRecommendations=u,l.createIGDChatSearchTypeaheadDataEntry=c}),98);
__d("useIGDMsysContactSearch",["IGDAWContactSearchConversionUtils","LSContactBitOffset","MWChatTemporarySearchResult","MWPSearchSystem","ReQL","ReQLSuspense","isStringNullOrEmpty","promiseDone","react","useAsyncReStore","useIGDCandidateSearchDataSource","useIGDCandidateSearchResults","useIGDSharesheetThreadRecommendations"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState;function m(e,t,n){var a=o("useIGDSharesheetThreadRecommendations").useIGDSharesheetThreadRecommendations(),i=r("useIGDCandidateSearchDataSource")({excludedIDs:t,includeGroupSearch:n}),l=r("useIGDCandidateSearchResults")(e,i),s=l[0].isLoading,m=l[1],_=r("useAsyncReStore")(),f=c(!1),g=d(new Map),h=g[0],y=g[1];u(function(){f.current===!1&&(f.current=!0,r("promiseDone")(_,function(e){o("MWPSearchSystem").makeAll(e)}))},[_]),u(function(){r("isStringNullOrEmpty")(e)&&n===!1&&s===!1&&m.size===0&&r("promiseDone")(_,function(e){var t=p(e);y(t)})},[_,e,n,m.size,s]);var C=m;return r("isStringNullOrEmpty")(e)&&(n?C=a:s===!1&&m.size===0&&(C=h)),{isLoading:s,searchResultItems:C}}function p(e){var t=new Map,n=o("ReQLSuspense").toArray(o("ReQL").mergeJoin(o("ReQL").fromTableAscending(e.tables.contacts),o("ReQL").fromTableAscending(e.tables.ig_contact_info)),i.id+":106");for(var r of n){var a=o("MWChatTemporarySearchResult").fromContact(void 0,o("LSContactBitOffset").has(80,r[0]),r[0],r[1],void 0,void 0,void 0),l=babelHelpers.extends({},a),s=o("useIGDSharesheetThreadRecommendations").createIGDChatSearchTypeaheadDataEntry(l),u=o("IGDAWContactSearchConversionUtils").convertSearchResultRawDataToIGDUser(s);t.set(u.id,{candidate:u,type:"user"})}return t}l.default=m}),98);
__d("IGDMsysContactSearch.react",["react","useIGDMsysContactSearch"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.children,n=e.excludedIDs,o=e.includeGroupSearch,a=e.searchQuery,i=r("useIGDMsysContactSearch")(a,n,o),l=i.isLoading,s=i.searchResultItems;return t(l,s)}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("useIGDPartnershipMessagesDataSourceQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29553723837605468"}),null);
__d("useIGDPartnershipMessagesDataSourceQuery.graphql",["useIGDPartnershipMessagesDataSourceQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"after_cursor"},t={defaultValue:null,kind:"LocalArgument",name:"before_cursor"},r={defaultValue:10,kind:"LocalArgument",name:"first"},o={defaultValue:null,kind:"LocalArgument",name:"last"},a={defaultValue:null,kind:"LocalArgument",name:"params"},i=[{kind:"Variable",name:"after",variableName:"after_cursor"},{kind:"Variable",name:"before",variableName:"before_cursor"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"last",variableName:"last"},{kind:"Variable",name:"query_params_shape",variableName:"params"}],l={alias:null,args:null,kind:"ScalarField",name:"creator_igid",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"user_name",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"profile_pic_uri_without_fallback",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[e,t,r,o,a],kind:"Fragment",metadata:null,name:"useIGDPartnershipMessagesDataSourceQuery",selections:[{alias:null,args:null,concreteType:"PAYCAMBusinessProfileResponsePayload",kind:"LinkedField",name:"cam_business_profile",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"brand_profile",plural:!1,selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"creator_discovery_search",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"creator_profile",plural:!1,selections:[s,u,c,d],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,t,e,r,o],kind:"Operation",name:"useIGDPartnershipMessagesDataSourceQuery",selections:[{alias:null,args:null,concreteType:"PAYCAMBusinessProfileResponsePayload",kind:"LinkedField",name:"cam_business_profile",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"brand_profile",plural:!1,selections:[m,{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"creator_discovery_search",plural:!1,selections:[m,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"edges",plural:!0,selections:[m,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[m,l,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"creator_profile",plural:!1,selections:[m,s,u,c,d,{kind:"InlineFragment",selections:[p],type:"CAMIGUserProfile",abstractKey:null}],storageKey:null},p],storageKey:null}],storageKey:null}],storageKey:null},p],storageKey:null}],storageKey:null}]},params:{id:n("useIGDPartnershipMessagesDataSourceQuery_facebookRelayOperation"),metadata:{},name:"useIGDPartnershipMessagesDataSourceQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useIGDPartnershipMessagesDataSource",["FBLogger","MWChatSearchResultType","getErrorSafe","react","relay-runtime/network/RelayObservable","useCometTypeaheadGraphQLDataSource","useIGDPartnershipMessagesDataSourceQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo,c=e!==void 0?e:e=n("useIGDPartnershipMessagesDataSourceQuery.graphql");function d(e){var t=100,n=r("useCometTypeaheadGraphQLDataSource")({gqlQuery:c,limit:t,normalize:m,queryVariablesBuilderFunction:function(t){var e=t.query;return{params:{creator_params:{creator_search_text:e,profile_type:"ALL_BC_ELIGIBLE"},is_type_ahead_search:!0}}}});return u(function(){return{fetchNetwork:function(){try{var t=n.fetchCache(e);if(t.entries.length>0)return r("relay-runtime/network/RelayObservable").create(function(e){e.next(t),e.complete()})}catch(e){r("FBLogger")("partnership_message_search").catching(r("getErrorSafe")(e)).mustfix("Error performing IGDPartnershipMessagesDataQuery.fetchNetwork while fetching from cache")}var o=n.fetchNetwork(e);return r("relay-runtime/network/RelayObservable").create(function(e){o.then(function(t){e.next(t),e.complete()}).catch(function(e){r("FBLogger")("partnership_message_search").catching(r("getErrorSafe")(e)).mustfix("Error performing IGDPartnershipMessagesDataQuery.fetchNetwork while fetching from the network")})})},resolveData:function(){},setExcludedIds:function(){}}},[e,n])}function m(e){var t,n,r=(t=e==null||(n=e.cam_business_profile)==null||(n=n.brand_profile)==null||(n=n.creator_discovery_search)==null?void 0:n.edges)!=null?t:[];return p(r,!0)}function p(e,t){return e.map(function(e){var n,o,a,i,l,s,u,c,d,m,p={id:(n=(o=e.node)==null?void 0:o.creator_igid)!=null?n:"",is_onboarded:t,is_verified:(a=(i=e.node)==null||(i=i.creator_profile)==null?void 0:i.is_verified)!=null?a:!1,name:(l=(s=e.node)==null||(s=s.creator_profile)==null?void 0:s.name)!=null?l:"",profile_pic_uri_without_fallback:(u=e.node)==null||(u=u.creator_profile)==null?void 0:u.profile_pic_uri_without_fallback,username:(c=(d=e.node)==null||(d=d.creator_profile)==null?void 0:d.user_name)!=null?c:""};return{key:p.id,label:p.id,rawData:{displayName:p.name||p.username,id:p.id,imageUrl:(m=p.profile_pic_uri_without_fallback)!=null?m:"",isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:!1,isEPD:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,resultType:r("MWChatSearchResultType").USER,secondaryImageUrl:"",subtext:p.username,verificationStatus:p.is_verified?"BLUE_VERIFIED":"NOT_VERIFIED"},type:"entry"}})}l.default=d}),98);
__d("useIGDPartnershipMessagesContactSearch.react",["useIGDCandidateSearchResults","useIGDPartnershipMessagesDataSource"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=r("useIGDPartnershipMessagesDataSource")({query:e,requestFlow:"network-upon-approve"}),n=r("useIGDCandidateSearchResults")(e,t),o=n[0].isLoading,a=n[1],i=a;return{isLoading:o,searchResultItems:i}}l.default=e}),98);
__d("IGDPartnershipMessagesContactSearch.react",["useIGDPartnershipMessagesContactSearch.react"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.children,n=e.searchQuery,o=r("useIGDPartnershipMessagesContactSearch.react")(n),a=o.isLoading,i=o.searchResultItems;return t(a,i)}l.default=e}),98);
__d("IGDContactSearch.react",["IGDMsysContactSearch.react","IGDPartnershipMessagesContactSearch.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.isPartnershipSearch;return t===!0?s.jsx(r("IGDPartnershipMessagesContactSearch.react"),babelHelpers.extends({},e)):s.jsx(r("IGDMsysContactSearch.react"),babelHelpers.extends({},e))}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("IGDContactSearchResultAvatar.react",["FBLogger","IGDFacepile.react","IGDSingleAvatar.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.avatarSize,n=e.candidate,o=e.disabled,a=o===void 0?!1:o,i=e.isSelected,l=i===void 0?!1:i;switch(n.type){case"thread":return n.candidate.secondaryImageUrl.length>0?s.jsx(r("IGDFacepile.react"),{firstParticipantURI:n.candidate.imageUrl,isSelected:l,secondParticipantURI:n.candidate.secondaryImageUrl,size:t}):s.jsx(r("IGDSingleAvatar.react"),{isSelected:l,size:t,src:n.candidate.imageUrl});case"user":return s.jsx(r("IGDSingleAvatar.react"),{alt:n.candidate.threadName,isDisabled:a,isSelected:l,size:t,src:n.candidate.imageUrl});default:throw r("FBLogger")("igd_web").mustfix("Expected recipient of type user or thread",n)}}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("IGDContactSearchResultTitleDebugLabel.react",["fbt","IGDSBox.react","IGDSTextVariants.react","isStringNullOrEmpty","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"[DM]").toString(),d=s._(/*BTDS*/"[TLC]").toString();function m(e){var t=e.candidate,n=t.candidate.isInstamadilloCutover,a=t.candidate.isDisappearingModeSettingOn;return null;var i}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),226);
__d("IGDContactSearchResultTextContent.react",["BaseMiddot.react","IGDContactSearchResultTitleDebugLabel.react","IGDSBox.react","IGDSTextVariants.react","IGDSVerifiedBadge.react","Locale","MWVerticalRhythm","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={rtl:{direction:"xzyj77d",$$css:!0}},c=function(t){switch(t.type){case"user":return t.candidate.isVerified;default:return!1}};function d(e){var t=e.candidate,n=e.disabled,a=n===void 0?!1:n,i=e.inGrid,l=i===void 0?!1:i,u=e.textSize,d=u===void 0?"medium":u,m=c(t),p=d==="medium"?o("IGDSTextVariants.react").IGDSTextBody:o("IGDSTextVariants.react").IGDSTextBody2;return s.jsxs(r("IGDSBox.react"),{alignItems:"center",direction:"row",width:l?void 0:"100%",children:[s.jsxs(p,{color:a?"secondaryText":"primaryText",maxLines:l?2:1,textAlign:l?"center":void 0,zeroMargin:!1,children:[s.jsx("span",{children:t.candidate.threadName}),m&&s.jsx("span",{className:"x1rg5ohu xdwrcjd x1n2onr6 xnfr1j",children:s.jsx(r("IGDSVerifiedBadge.react"),{size:"small"})})]}),!1]})}d.displayName=d.name+" [from "+i.id+"]";function m(e){var t=e.additionalInfo,n=e.subtitleText;return s.jsxs(r("IGDSBox.react"),{direction:"column",xstyle:o("Locale").isRTL()?u.rtl:void 0,children:[s.jsx(r("MWVerticalRhythm"),{height:8}),s.jsxs(r("IGDSBox.react"),{direction:"row",children:[s.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",maxLines:1,zeroMargin:!1,children:n}),t!=null&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"x1roi4f4 x2lah0s xdj266r x2fvf9 xat24cr xdwrcjd",children:s.jsx(r("BaseMiddot.react"),{})}),s.jsx(o("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",zeroMargin:!1,children:t})]})]})]})}m.displayName=m.name+" [from "+i.id+"]",l.IGDContactSearchResultTitle=d,l.IGDContactSearchResultSubtitle=m}),98);
__d("IGDContactSearchResult.react",["fbt","IGDContactSearchResultAvatar.react","IGDContactSearchResultTextContent.react","IGDInviteModelUtils","IGDSCheckbox.react","IGDSListItem.react","IGDThreadListNewMessageLoggingDataContext","JSResourceForInteraction","MessengerWebUXLogger","emptyFunction","mergeRefs","react","useIGDSLazyDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useEffect,p=c.useState,_=s._(/*BTDS*/"Radio selection").toString(),f=r("JSResourceForInteraction")("IGDAlertDialog.react").__setRef("IGDContactSearchResult.react"),g=s._(/*BTDS*/"Can't add to group"),h=s._(/*BTDS*/"This user cannot be added to the group."),y=s._(/*BTDS*/"OK"),C=s._(/*BTDS*/"cannot be added to the group");function b(e){var t=e.avatarSize,n=e.candidate,a=e.hideCheckbox,i=a===void 0?!1:a,l=e.isSelected,s=e.onPress,c=e.onResultRendered,m=e.searchType,p=e.shouldCheckGroupCreationReachability,b=r("useIGDSLazyDialog")(f),R=b[0],L=r("MessengerWebUXLogger").useInteractionLogger(),E=o("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),k=n.candidate.isDisappearingModeSettingOn,I=o("IGDInviteModelUtils").shouldDisableSharingOrForwarding(n.candidate.reachabilityStatus,m),T=p&&n.type==="user"&&n.candidate.isGroupCreationReachable===!1,D=I||T,x=d(function(){if(I){R({body:o("IGDInviteModelUtils").getDisableSharingOrForwardingBody(n.candidate.threadName,m),close:y,title:o("IGDInviteModelUtils").getDisableSharingOrForwardingTitle(m)});return}if(T){L==null||L({eventName:"igd_group_creation_unreachable_recipient_alert",flowInstanceId:E}),R({body:h,close:y,title:g});return}s(n)},[I,T,s,n,R,m,L,E]),$=r("mergeRefs")(v(c),S()),P=i?void 0:u.jsx(r("IGDSCheckbox.react"),{"aria-label":_,checkboxShape:"circle",isChecked:l,isDashed:k,isDisabled:D,name:"ContactSearchResultCheckbox",onChange:r("emptyFunction"),tabIndex:-1});return u.jsx(r("IGDSListItem.react"),{addOnEnd:P,addOnStart:u.jsx(r("IGDContactSearchResultAvatar.react"),{avatarSize:t,candidate:n,disabled:D}),context:u.jsx(o("IGDContactSearchResultTextContent.react").IGDContactSearchResultSubtitle,{additionalInfo:T?C:null,subtitleText:n.candidate.subtext}),onPress:x,overlayDisabled:!1,paddingX:4,paddingY:2,ref:$,testid:void 0,title:u.jsx(o("IGDContactSearchResultTextContent.react").IGDContactSearchResultTitle,{candidate:n,disabled:D})})}b.displayName=b.name+" [from "+i.id+"]";function v(e){return d(function(t){t&&e()},[e])}function S(){var e=p(null),t=e[0],n=e[1];return m(function(){if(t){var e=function(t){t.stopImmediatePropagation(),t.preventDefault()};return t.addEventListener("mousedown",e),function(){return t.removeEventListener("mousedown",e)}}},[t]),n}l.IGDContactSearchResult=b}),226);
__d("IGDSupershareContactSearchResult.react",["fbt","CometPressable.react","IGDContactSearchResultAvatar.react","IGDContactSearchResultTextContent.react","IGDInviteModelUtils","IGDSBox.react","IGDSupershareConstants","JSResourceForInteraction","PolarisUA","react","useIGDSLazyDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useCallback,d={bottomSheet:{paddingBottom:"xwib8y2",paddingInlineEnd:"x14vy60q",paddingInlineStart:"xyiysdx",paddingTop:"x1y1aw1k",$$css:!0},dialog:{paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",$$css:!0},root:{borderStartStartRadius:"xjwep3j",borderStartEndRadius:"x1t39747",borderEndEndRadius:"x1wcsgtt",borderEndStartRadius:"x1pczhz8",justifyContent:"xl56j7k",$$css:!0}},m=r("JSResourceForInteraction")("IGDAlertDialog.react").__setRef("IGDSupershareContactSearchResult.react");function p(e){var t=e.candidate,n=e.isSelected,a=e.onPress,i=e.searchType,l=r("useIGDSLazyDialog")(m),p=l[0],_=o("IGDInviteModelUtils").shouldDisableSharingOrForwarding(t.candidate.reachabilityStatus,i),f=c(function(){if(_){p({body:o("IGDInviteModelUtils").getDisableSharingOrForwardingBody(t.candidate.threadName,i),close:s._(/*BTDS*/"OK"),title:o("IGDInviteModelUtils").getDisableSharingOrForwardingTitle(i)});return}a(t)},[t,a,_,i,p]);return u.jsx(r("CometPressable.react"),{onPress:f,overlayDisabled:!0,xstyle:[d.root,o("PolarisUA").isDesktop()&&d.dialog,!o("PolarisUA").isDesktop()&&d.bottomSheet],children:u.jsxs(r("IGDSBox.react"),{alignItems:"center","data-testid":void 0,height:o("IGDSupershareConstants").SUPERSHARE_CONTACT_HEIGHT_PX,width:o("IGDSupershareConstants").SUPERSHARE_CONTACT_WIDTH_PX,children:[u.jsx(r("IGDContactSearchResultAvatar.react"),{avatarSize:"XL",candidate:t,disabled:_,isSelected:n}),u.jsx(r("IGDSBox.react"),{marginTop:2,children:u.jsx(o("IGDContactSearchResultTextContent.react").IGDContactSearchResultTitle,{candidate:t,disabled:_,inGrid:!0,textSize:"small"})})]})})}p.displayName=p.name+" [from "+i.id+"]",l.IGDSupershareContactSearchResult=p}),226);
__d("IGDAWContactSearchResultList.react",["fbt","FBLogger","IGDContactSearch.react","IGDContactSearchResult.react","IGDSBox.react","IGDSGlimmer.react","IGDSListItemPlaceholder.react","IGDSTextVariants.react","IGDSupershareConstants","IGDSupershareContactSearchResult.react","PolarisUA","react","useIsChatTabsDisplay"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["excludedIDs","includeGroupSearch","isPartnershipSearch","removeE2eeResults","searchQuery"],u,c=u||(u=o("react")),d="medium",m=s._(/*BTDS*/"No account found."),p=s._(/*BTDS*/"Suggested"),_=s._(/*BTDS*/"Start a conversation with a creator in your partnership inbox to help manage your conversations more effectively."),f={avatarPlaceholder:{backgroundColor:"x1hmx34t",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"x14z7g9a",width:"x7mnju",$$css:!0},desktopContactsContainer:{columnGap:"x40hh3e",maxWidth:"x1tlaipk","@media (max-width: 500px)_maxWidth":"x1c90odo",$$css:!0},mwebContactsContainer:{columnGap:"x40hh3e",maxWidth:"x1ml4wws","@media (max-width: 375px)_columnGap":"xz7isgl","@media (max-width: 375px)_maxWidth":"xh6uzej",$$css:!0},placeholderBoxForBottomSheet:{paddingBottom:"xwib8y2",paddingInlineEnd:"x14vy60q",paddingInlineStart:"xyiysdx",paddingTop:"x1y1aw1k",$$css:!0},placeholderBoxForDialog:{paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",$$css:!0},supershareScrollContainer:{overscrollBehavior:"xish69e",$$css:!0},textPlaceholder:{backgroundColor:"x1hmx34t",height:"x1kpxq89",width:"xh8yej3",$$css:!0}};function g(e){var t=e.children,n=e.childrenMarginTop,a=n===void 0?4:n,i=e.label,l=e.onScroll,s=e.paddingX,u=e.xstyle;return c.jsxs(r("IGDSBox.react"),{"data-testid":void 0,flex:"grow",onScroll:l,overflow:"scrollY",paddingX:s,xstyle:u,children:[i!=null?c.jsx(r("IGDSBox.react"),{margin:4,marginBottom:0,children:c.jsx(o("IGDSTextVariants.react").IGDSTextBodyEmphasized,{elementType:"h2",children:i})}):null,c.jsx(r("IGDSBox.react"),{marginTop:a,children:t})]})}g.displayName=g.name+" [from "+i.id+"]";function h(){return c.jsx(r("IGDSBox.react"),{columnGap:4,direction:"row",justifyContent:"center",rowGap:1,wrap:!0,children:Array(12).fill(0).map(function(e,t){return c.jsx(r("IGDSBox.react"),{justifyContent:"center",xstyle:[o("PolarisUA").isDesktop()&&f.placeholderBoxForDialog,!o("PolarisUA").isDesktop()&&f.placeholderBoxForBottomSheet],children:c.jsxs(r("IGDSBox.react"),{alignItems:"center",height:o("IGDSupershareConstants").SUPERSHARE_CONTACT_HEIGHT_PX,justifyContent:"center",width:o("IGDSupershareConstants").SUPERSHARE_CONTACT_WIDTH_PX,children:[c.jsx(r("IGDSGlimmer.react"),{index:t,xstyle:f.avatarPlaceholder}),c.jsx(r("IGDSBox.react"),{marginTop:2,paddingX:1,width:"100%",children:c.jsx(r("IGDSGlimmer.react"),{index:t,xstyle:f.textPlaceholder})})]})},t)})})}h.displayName=h.name+" [from "+i.id+"]";function y(){var e=r("useIsChatTabsDisplay")();return c.jsx(c.Fragment,{children:Array(7).fill(0).map(function(t,n){return c.jsx(r("IGDSListItemPlaceholder.react"),{color:"elevatedHighlightBackground",fullWidth:!0,index:n,paddingX:e?4:6,paddingY:2,size:d},"igd-aw-contact_search_result_list_placeholder-"+n)})})}y.displayName=y.name+" [from "+i.id+"]";function C(){return c.jsx(g,{children:c.jsx(r("IGDSBox.react"),{paddingX:6,paddingY:3,children:c.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",children:m})})})}C.displayName=C.name+" [from "+i.id+"]";function b(){return c.jsx(g,{children:c.jsx(r("IGDSBox.react"),{paddingX:6,paddingY:3,children:c.jsx(o("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",children:_})})})}b.displayName=b.name+" [from "+i.id+"]";function v(e){var t=e.hideCheckbox,n=t===void 0?!1:t,a=e.inSearchPage,i=a===void 0?!1:a,l=e.insetPaddingX,s=e.isLoading,u=e.isPartnershipSearch,m=e.isSupershare,_=e.onResultRendered,v=e.onScroll,S=e.onSearchResultPress,R=e.removeE2eeResults,L=e.searchQuery,E=e.searchResultItems,k=e.searchType,I=e.selectedCandidates,T=e.shouldCheckGroupCreationReachability;if(u===!0&&L.length===0)return c.jsx(b,{});if(E.size===0&&!s&&L.length!==0)return c.jsx(C,{});var D=!L&&E.size!==0&&m!==!0?p:null,x=Array.from(E.entries());if(R===!0&&(x=x.filter(function(e){var t=e[0],n=e[1];return n.candidate.isE2EE!==!0})),m===!0&&!L){var $,P=Array.from(I.entries()).filter(function(e){var t=e[0],n=e[1];return x.find(function(e){var n=e[0],r=e[1];return t===n})==null}).toReversed();($=x).unshift.apply($,P)}return m===!0&&i!==!0?c.jsxs(g,{childrenMarginTop:0,label:D,onScroll:v,paddingX:l,xstyle:f.supershareScrollContainer,children:[!s&&c.jsx(r("IGDSBox.react"),{alignItems:"center",width:"100%",children:c.jsx(r("IGDSBox.react"),{direction:"row",paddingY:2,rowGap:1,width:"100%",wrap:!0,xstyle:[o("PolarisUA").isDesktop()&&f.desktopContactsContainer,!o("PolarisUA").isDesktop()&&f.mwebContactsContainer],children:x.map(function(e){var t=e[0],n=e[1],a=I.has(n.candidate.id);switch(n.type){case"thread":case"user":return c.jsx(o("IGDSupershareContactSearchResult.react").IGDSupershareContactSearchResult,{candidate:n,isSelected:a,onPress:function(){S(n)},searchType:k},t);default:throw r("FBLogger")("igd_web").mustfixThrow("Expected recipient of type user or thread",n)}})})}),s&&c.jsx(h,{})]}):c.jsxs(g,{label:D,onScroll:v,paddingX:l,children:[x.map(function(e){var t=e[0],a=e[1],i=I.has(a.candidate.id);switch(a.type){case"thread":case"user":return c.jsx(o("IGDContactSearchResult.react").IGDContactSearchResult,{avatarSize:d,candidate:a,hideCheckbox:n,isSelected:i,onPress:function(){S(a)},onResultRendered:function(){_==null||_(a,i)},searchType:k,shouldCheckGroupCreationReachability:T},t);default:throw r("FBLogger")("igd_web").mustfixThrow("Expected recipient of type user or thread",a)}}),s&&c.jsx(y,{})]})}v.displayName=v.name+" [from "+i.id+"]";function S(t){var n=t.excludedIDs,o=t.includeGroupSearch,a=t.isPartnershipSearch,i=t.removeE2eeResults,l=t.searchQuery,s=babelHelpers.objectWithoutPropertiesLoose(t,e);return c.jsx(r("IGDContactSearch.react"),{excludedIDs:n,includeGroupSearch:o,isPartnershipSearch:a,searchQuery:l,children:function(t,n){return c.jsx(v,babelHelpers.extends({},s,{isLoading:t,isPartnershipSearch:a,removeE2eeResults:i,searchQuery:l,searchResultItems:n}))}})}S.displayName=S.name+" [from "+i.id+"]",l.default=S}),226);
__d("PolarisDirectSearchUserContainerToken.react",["fbt","IGDSBox.react","IGDSButton.react","IGDSXPanoFilledIcon.react","PolarisIGCoreSVGIconButton.react","PolarisUA","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(14),n=e.onClick,a=e.onRemoveClick,i=e.selectedToken,l=e.userId,c=e.username,d=i===l,m=d?"primaryButton":"secondaryAction",p=d?"web-always-white":"ig-primary-button",_=d?"white_link":"primary_link",f;t[0]!==_||t[1]!==n||t[2]!==c?(f=u.jsx(r("IGDSButton.react"),{label:c,onClick:n,variant:_}),t[0]=_,t[1]=n,t[2]=c,t[3]=f):f=t[3];var g;t[4]!==d||t[5]!==a||t[6]!==p||t[7]!==l||t[8]!==c?(g=(d||o("PolarisUA").isDesktop())&&u.jsx(r("IGDSBox.react"),{justifyContent:"center",marginStart:2,position:"relative",children:u.jsx(r("PolarisIGCoreSVGIconButton.react"),{onClick:function(){return a(l)},padding:0,children:u.jsx(r("IGDSXPanoFilledIcon.react"),{alt:s._(/*BTDS*/"Remove {recipient name}",[s._param("recipient name",c)]),color:p,size:12})})}),t[4]=d,t[5]=a,t[6]=p,t[7]=l,t[8]=c,t[9]=g):g=t[9];var h;return t[10]!==m||t[11]!==f||t[12]!==g?(h=u.jsxs(r("IGDSBox.react"),{color:m,direction:"row",height:26,justifyContent:"center",margin:1,paddingX:3,position:"relative",shape:"extraRounded",children:[f,g]}),t[10]=m,t[11]=f,t[12]=g,t[13]=h):h=t[13],h}l.default=c}),226);
__d("IGDirectSearchUserContainerTokenField",["fbt","FocusInertRegion.react","IGDSBox.react","IGDSButton.react","IGDSCircleXPanoFilled24Icon.svg.react","IGDSIconButton.react","IGDSSearchPanoOutlineIcon.react","IGDSTextInput.react","IGDSTextVariants.react","IGDThreadListNewMessageLoggingDataContext","Keys","MessengerWebUXLogger","PolarisDOMListener.react","PolarisDirectSearchUserContainerToken.react","PolarisDirectStrings","PolarisIGTheme.react","PolarisSearchStrings","PolarisUA","focusScopeQueries","nullthrows","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useEffect,p=c.useId,_=c.useImperativeHandle,f=c.useRef,g=c.useState,h={root:{paddingBottom:null,paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,paddingTop:null,maxHeight:"x1mu601j",overflowX:"xw2csxc",overflowY:"x1odjw0f",alignItems:"x1pha0wt",$$css:!0},rootMobile:{paddingTop:"xexx8yu",paddingInlineEnd:"xv54qhq",paddingBottom:"x18d9i69",paddingInlineStart:"xf7dkkf",height:"x5kalc8",overflowX:"x6ikm8r",overflowY:"x10wlt62",alignItems:"x6s0dn4",$$css:!0},rootSupershare:{paddingBottom:null,paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,paddingTop:null,marginTop:"xw7yly9",marginBottom:"x1e56ztr",$$css:!0},recipientsContainerMobile:{overflowX:"xw2csxc",overflowY:"x10wlt62",alignItems:"x6s0dn4",height:"x5yr21d",$$css:!0}};function y(e){var t=e.ref,n=e.inSearchPage,a=e.onCancelSearch,i=e.isSupershare,l=e.onClearQuery,c=e.onRemoveRecipient,y=e.onTextInputChange,C=e.query,v=e.recipients,S=e.autoFocus,R=e.isPartnershipSearch,L=R===void 0?!1:R,E=e.onFocus,k=o("PolarisUA").isMobile(),I=g(null),T=I[0],D=I[1],x=f(null),$=f(null);m(function(){S&&x.current&&x.current.focus()},[S]),_(t,function(){return{focus:function(){var e;(e=x.current)==null||e.focus()},blur:function(){var e;(e=x.current)==null||e.blur()}}});var P=d(function(){var e;(e=x.current)==null||e.blur()},[]);b(P);var N=o("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),M=r("MessengerWebUXLogger").useInteractionLogger(),w=function(t){M==null||M({eventName:"unselect_member",flowInstanceId:N}),D(null),c(t)},A=[].concat(Array.from(v.keys()));m(function(){$.current&&(k?$.current.scrollLeft=$.current.scrollWidth:i!=!0&&$.current.scrollIntoView(!1))},[A.length]);var F=o("PolarisIGTheme.react").isDarkMode()?"secondaryBackground":"highlightBackground",O=p(),B=u.jsx(r("IGDSTextInput.react"),{id:O,autoComplete:"off",backgroundColor:i===!0?F:"transparent",name:"queryBox",onChange:y,onFocus:function(){D(null),E&&E()},onKeyDown:function(t){t.keyCode===r("Keys").BACKSPACE&&C.length===0&&D(A[A.length-1])},placeholder:i===!0?o("PolarisSearchStrings").SEARCH_PLACEHOLDER_TEXT:o("PolarisDirectStrings").SEARCH_USER_BOX_PLACEHOLDER,ref:x,spellCheck:!1,startAdornment:i===!0?u.jsx(r("IGDSBox.react"),{marginStart:2,children:u.jsx(r("IGDSSearchPanoOutlineIcon.react"),{size:16,color:"ig-secondary-text",alt:o("PolarisSearchStrings").SEARCH_PLACEHOLDER_TEXT})}):null,endAdornment:i===!0&&C.length>0?u.jsx(r("IGDSIconButton.react"),{onClick:l,children:u.jsx(r("IGDSCircleXPanoFilled24Icon.svg.react"),{color:"rgb(var(--ig-secondary-text))"})}):null,style:"borderless",value:C}),W=i===!0&&o("PolarisUA").isTouchDevice()?u.jsx(r("FocusInertRegion.react"),{focusQuery:o("focusScopeQueries").tabbableScopeQuery,children:B}):B;return u.jsxs(r("IGDSBox.react"),{direction:"row",xstyle:[k?h.rootMobile:h.root,i===!0?h.rootSupershare:null],children:[i!==!0&&u.jsx(r("IGDSBox.react"),{justifyContent:"start",children:u.jsx(o("IGDSTextVariants.react").IGDSTextSection,{zeroMargin:!0,elementType:"label",labelFor:O,children:o("PolarisDirectStrings").TO_LABEL_STRING})}),u.jsxs(r("IGDSBox.react"),{containerRef:$,direction:"row",wrap:!k,flex:"grow",xstyle:k?h.recipientsContainerMobile:void 0,children:[u.jsx(r("PolarisDOMListener.react"),{event:"keydown",handler:function(){T!=null&&w(T)},target:document.body}),i!==!0&&A.map(function(e){return u.jsx(r("PolarisDirectSearchUserContainerToken.react"),{onClick:function(){T===e?w(e):D(e)},onRemoveClick:w,selectedToken:T,userId:e,username:r("nullthrows")(v.get(e)).candidate.threadName},e)}),L&&A.length>0?null:W,i===!0&&n&&u.jsx(r("IGDSBox.react"),{marginStart:2,justifyContent:"center",children:u.jsx(r("IGDSButton.react"),{label:s._(/*BTDS*/"Cancel"),variant:"secondary_link",onClick:a})})]})]})}y.displayName=y.name+" [from "+i.id+"]";var C=y;function b(e){m(function(){if("visualViewport"in window&&o("PolarisUA").isMobile()){var t=function(){var t=window.innerHeight>window.visualViewport.height;t||e()};return window.visualViewport.addEventListener("resize",t),function(){window.visualViewport.removeEventListener("resize",t)}}},[e])}l.default=C}),226);
__d("IGDAWContactSearch.react",["IGDAWContactSearchResultList.react","IGDSBox.react","IGDSDivider.react","IGDirectSearchUserContainerTokenField","PolarisUA","react","useShowRecipientLimitReachedDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useRef,m=u.useState;function p(e){var t=e.addonContent,n=e.excludedIDs,a=e.includeGroupSearch,i=e.insetPaddingX,l=e.isPartnershipSearch,u=l===void 0?!1:l,p=e.isSupershare,_=e.maxRecipients,f=_===void 0?32:_,g=e.onAddRecipient,h=e.onQueryChanged,y=e.onRemoveRecipient,C=e.onResultRendered,b=e.onResultSelected,v=e.recipients,S=e.searchType,R=e.setRecipients,L=e.shouldCheckGroupCreationReachability,E=L===void 0?!1:L,k=o("PolarisUA").isMobile(),I=m(""),T=I[0],D=I[1],x=!k&&!p,$=m(x),P=$[0],N=$[1],M=d(null),w=c(function(){!x&&M.current&&M.current.focus()},[x]),A=c(function(e){var t,n=(t=e==null?void 0:e.target.value)!=null?t:"";D(n),h==null||h(n)},[h]),F=c(function(e){y==null||y();var t=new Map(v);t.delete(e),R(t)},[y,v,R]),O=c(function(e){F(e),w()},[w,F]),B=r("useShowRecipientLimitReachedDialog")(S,f),W=c(function(e){var t=new Map(v);if(v.size>=f){B();return}t.set(e.candidate.id,e),R(t),b==null||b(e,Array.from(v.keys()))},[v,f,R,b,B]),q=c(function(e){var t,n=e.candidate.id;v.has(n)?F(n):(W(e),g==null||g()),D(""),(t=M.current)==null||t.blur(),N(!1)},[W,g,v,F]),U=c(function(){if(k){var e;(e=M.current)==null||e.blur()}},[k]);return s.jsxs(s.Fragment,{children:[s.jsx(r("IGDSBox.react"),{paddingX:i,children:s.jsx(r("IGDirectSearchUserContainerTokenField"),{autoFocus:x,inSearchPage:P,isPartnershipSearch:u,isSupershare:p,onCancelSearch:function(){return N(!1)},onClearQuery:function(){return D("")},onFocus:function(){return N(!0)},onRemoveRecipient:O,onTextInputChange:A,query:T,recipients:v,ref:M})}),p!==!0&&s.jsx(r("IGDSDivider.react"),{style:"elevated"}),!T&&v.size===0?t:null,s.jsx(r("IGDAWContactSearchResultList.react"),{excludedIDs:n,inSearchPage:P,includeGroupSearch:a,insetPaddingX:i,isPartnershipSearch:u,isSupershare:p,onResultRendered:C,onScroll:U,onSearchResultPress:q,searchQuery:T,searchType:S,selectedCandidates:v,shouldCheckGroupCreationReachability:E})]})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("LsOmnipickerDataSource",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({LOCAL:0,SERVER:1,SERVER_DSQ1:2,SERVER_DSQ2:3}),l=e;i.default=l}),66);
__d("OmnipickerSearchResultSelectedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("934"),s=o("FalcoLoggerInternal").create("omnipicker_search_result_selected",e),u=s;l.default=u}),98);
__d("OmnipickerSearchUISectionType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({NULL_STATE_SUGGESTED:1,NULL_STATE_XAC_FOLLOWING:2,QUERY_SUGGESTED:3,QUERY_NON_FOLLOWING:4,QUERY_XAC_FOLLOWING:5,QUERY_XAC_NON_FOLLOWING:6,QUERY_BUSINESSES:7,OTHER:8,GROUP_CHATS:9,NULL_STATE_SUGGESTED_DIRECT_INVITE:10,NULL_STATE_CATEGORIES_DIRECT_INVITE:11,QUERY_SUGGESTED_DIRECT_INVITE:12,COMMUNITY_CHATS:13,COMMUNITY_CHATS_SEE_MORE:14,AI:15,AI_SEE_MORE:16,AI_PICKER:17,INVITE_TO_INSTAGRAM:18,INVITE_TO_INSTAGRAM_SEE_MORE:19,PHONE_CONTACTS:20,NOT_IN_PHONE_CONTACTS:21}),l=e;i.default=l}),66);
__d("MWOmnipickerLoggingUtils",["I64","MWSearchLogging","OmnipickerSearchResultSelectedFalcoEvent","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){var n=t.searchSource,r=t.section,o=t.sectionAnalyticsName;return c(e,r,o,n)}function u(e,t){var n=t.candidate.chatSearchTypeaheadDataEntry;if(n==null)return 8;var r=n.rawData,o=r.searchSource,a=r.section,i=r.sectionAnalyticsName;return c(e,a,i,o)}function c(e,t,n,r){if(e==="")return 1;if(r!=="server"||t==="")return 3;var a=o("MWSearchLogging").SectionAnalyticsNameType.cast(n);if(a==null)return 8;switch(a){case o("MWSearchLogging").SectionAnalyticsNameType.CM_THREADS:return 13;case o("MWSearchLogging").SectionAnalyticsNameType.CONTACTS_GROUPS:return 3;case o("MWSearchLogging").SectionAnalyticsNameType.NON_CONTACTS:return 4;case o("MWSearchLogging").SectionAnalyticsNameType.PAGES:return 7;default:return 8}}var d=function(t){switch(t){case"server":return[2,3];case"offline":case"offline_nullstate":case"secure":return[0];default:return[]}},m=function(n){var t;if(n==null)return{final_score:0,raw_score:0,raw_score_index:"-1",request_id:""};var r=n.score,a=n.scoreIndex;return{final_score:r!=null?r:0,raw_score:r!=null?r:0,raw_score_index:(t=(e||(e=o("I64"))).to_string(a))!=null?t:"-1",request_id:""}},p=function(t,n,o,a,i,l,s,u,p,_,f,g){var e={query_string:t,result_fbid:a,result_index:(l!=null?l:-1).toString(),result_type:s!=null?s:7};r("OmnipickerSearchResultSelectedFalcoEvent").log(function(){return{data_sources:d(u),is_epd:r("gkx")("23390")||g,is_interop_thread:!1,mnet_request:m(i),recipient_ids:n,search_mode:1,search_result:e,session_id:o!=null?o:"",thread_id:null,ui_section:c(t,p,_,u),ui_section_index:(f!=null?f:-1).toString()}})};l.mapSectionToOmnipickerSearchUISection=s,l.mapSectionToOmnipickerSearchUISectionForIG=u,l.getLoggingDataSources=d,l.getMnetRankInfo=m,l.logOmnipickerSearchResultSelectedHelper=p}),98);
__d("OmnipickerSearchEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("742"),s=o("FalcoLoggerInternal").create("omnipicker_search_end",e),u=s;l.default=u}),98);
__d("OmnipickerSearchImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("744"),s=o("FalcoLoggerInternal").create("omnipicker_search_impression",e),u=s;l.default=u}),98);
__d("OmnipickerSearchQueryChangedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("928"),s=o("FalcoLoggerInternal").create("omnipicker_search_query_changed",e),u=s;l.default=u}),98);
__d("OmnipickerSearchStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("929"),s=o("FalcoLoggerInternal").create("omnipicker_search_start",e),u=s;l.default=u}),98);
__d("IGDOmnipickerLoggingUtils",["MWOmnipickerLoggingUtils","OmnipickerSearchEndFalcoEvent","OmnipickerSearchImpressionFalcoEvent","OmnipickerSearchQueryChangedFalcoEvent","OmnipickerSearchStartFalcoEvent","gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){if(t!=null){var o=!0,a=!1;for(var i of e){var l=i[0],s=i[1],u=s.candidate,c=u.chatSearchTypeaheadDataEntry;if(c==null)return;var d=c.rawData;d.isE2EE===!1&&(o=!1),d.isEPD===!0&&(a=!0)}var m=Array.from(e.values()).map(function(e){var t;return(t=e.candidate.chatSearchTypeaheadDataEntry)==null?void 0:t.rawData.searchResultType}).filter(function(e){return e!=null});r("OmnipickerSearchEndFalcoEvent").log(function(){return{end_action:n,is_epd:r("gkx")("23390")||a,recipient_ids:Array.from(e.keys()),result_type:m.at(m.length-1),search_mode:1,session_id:t!=null?t:"",transport_type:o?1:3}})}}function s(){var e=r("uuidv4")();return r("OmnipickerSearchStartFalcoEvent").log(function(){return{entry_surface:1,is_epd:r("gkx")("23390"),omnipicker_type:1,search_mode:1,session_id:e}}),e}function u(e,t){t!=null&&r("OmnipickerSearchQueryChangedFalcoEvent").log(function(){return{query_length:e.length.toString(),query_string:e,search_mode:1,session_id:t}})}function c(e,t,n,r){if(r!=null){var a=t.candidate.chatSearchTypeaheadDataEntry;if(a!=null){var i=a.rawData;i!=null&&o("MWOmnipickerLoggingUtils").logOmnipickerSearchResultSelectedHelper(e,n,r,i.id,i.rankingScore,i.renderIndex,i.searchResultType,i.searchSource,i.section,i.sectionAnalyticsName,i.sectionRenderIndex,i.isEPD)}}}function d(e,t,n,a){var i;if(a!=null){var l=e.candidate.chatSearchTypeaheadDataEntry;if(l!=null){var s=l.rawData;if(s!=null){var u=s.id,c=s.isE2EE,d=s.isEPD,m=s.renderIndex,p=s.searchResultType,_=s.searchSource,f=s.sectionRenderIndex,g={query_string:n,result_fbid:u,result_index:(i=m==null?void 0:m.toString())!=null?i:"-1",result_type:p!=null?p:7};r("OmnipickerSearchImpressionFalcoEvent").log(function(){var r;return{data_sources:o("MWOmnipickerLoggingUtils").getLoggingDataSources(_),impression_selected:t,is_epd:d,recipient_ids:[u.toString()],search_mode:1,search_result:g,session_id:a,thread_id:u,transport_type:c?1:3,ui_section:o("MWOmnipickerLoggingUtils").mapSectionToOmnipickerSearchUISectionForIG(n,e),ui_section_index:(r=f==null?void 0:f.toString())!=null?r:"-1"}})}}}}l.logOmnipickerSearchEndFalcoEvent=e,l.logOmnipickerSearchStartFalcoEvent=s,l.logOmnipickerQueryChangedFalcoEvent=u,l.logOmnipickerResultSelectedFalcoEvent=c,l.logOmnipickerResultImpressionFalcoEvent=d}),98);
__d("IGDOmnipickerSearchLoggingContextProvider.react",["IGDOmnipickerLoggingUtils","emptyFunction","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=u.useRef,p=c({logQueryChanged:r("emptyFunction"),logResultImpression:r("emptyFunction"),logResultSelected:r("emptyFunction"),logSearchEnd:r("emptyFunction"),logSearchStart:r("emptyFunction"),markSuccess:r("emptyFunction")});function _(e){var t=e.children,n=m({query:"",sessionId:null,success:!1}),r=function(){n.current.sessionId=o("IGDOmnipickerLoggingUtils").logOmnipickerSearchStartFalcoEvent()},a=function(t){n.current.query=t,o("IGDOmnipickerLoggingUtils").logOmnipickerQueryChangedFalcoEvent(t,n.current.sessionId)},i=function(t){o("IGDOmnipickerLoggingUtils").logOmnipickerSearchEndFalcoEvent(t,n.current.sessionId,n.current.success?7:8)},l=function(t,r){o("IGDOmnipickerLoggingUtils").logOmnipickerResultSelectedFalcoEvent(n.current.query,t,r,n.current.sessionId)},u=function(t,r){o("IGDOmnipickerLoggingUtils").logOmnipickerResultImpressionFalcoEvent(t,r,n.current.query,n.current.sessionId)},c=function(){n.current.success=!0},d=m({logQueryChanged:a,logResultImpression:u,logResultSelected:l,logSearchEnd:i,logSearchStart:r,markSuccess:c});return s.jsx(p.Provider,{value:d.current,children:t})}_.displayName=_.name+" [from "+i.id+"]";function f(){return d(p)}l.IGDOmnipickerSearchLoggingContextProvider=_,l.useIGDOmnipickerSearchLoggingContext=f}),98);
__d("IGDAWContactSearchContainer.react",["IGDAWContactSearch.react","IGDOmnipickerSearchLoggingContextProvider.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useRef;function m(e){var t=o("IGDOmnipickerSearchLoggingContextProvider.react").useIGDOmnipickerSearchLoggingContext(),n=t.logQueryChanged,a=t.logResultImpression,i=t.logResultSelected,l=t.logSearchEnd,u=t.logSearchStart,m=d(new Map),p=function(n){m.current=n,e.setRecipients(n)};return c(function(){return u(),function(){l(m.current)}},[u,l]),s.jsx(r("IGDAWContactSearch.react"),babelHelpers.extends({},e,{onQueryChanged:n,onResultRendered:a,onResultSelected:i,setRecipients:p}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("IGDShareSheetDMBlockedMessageBar.react",["fbt","MWXComposerBanner.react","MessengerWebUXLogger","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(5),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s._(/*BTDS*/"You can\u2019t send or receive disappearing messages on Instagram.com yet"),e[0]=t):t=e[0];var n=t,a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=s._(/*BTDS*/"Some of your chats have disappearing messages turned on. To send and receive new messages in those chats, use your Instagram app."),e[1]=a):a=e[1];var i=a,l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l={eventName:"igd_fallback_sharesheet_disabled",extraData:{is_instamadillo:"true"}},e[2]=l):l=e[2];var c=r("MessengerWebUXLogger").useImpressionLoggerRef(l),d;return e[3]!==c?(d=u.jsx(r("MWXComposerBanner.react"),{bodyText:i,headerText:n,ref:c}),e[3]=c,e[4]=d):d=e[4],d}l.default=c}),226);
__d("IGDShareSheetTLCBlockedMessageBar.react",["fbt","MWXComposerBanner.react","MessengerWebUXLogger","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(5),n=e.bodyText,a=e.headerText,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={eventName:"igd_fallback_sharesheet_disabled",extraData:{is_instamadillo_tlc:"true"}},t[0]=i):i=t[0];var l=r("MessengerWebUXLogger").useImpressionLoggerRef(i),s;return t[1]!==n||t[2]!==a||t[3]!==l?(s=u.jsx(r("MWXComposerBanner.react"),{bodyText:n,headerText:a,ref:l}),t[1]=n,t[2]=a,t[3]=l,t[4]=s):s=t[4],s}function d(){var e=o("react-compiler-runtime").c(2),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s._(/*BTDS*/"End-to-end encrypted messages aren\u2019t available on Instagram.com yet"),e[0]=t):t=e[0];var n=t,r;if(e[1]===Symbol.for("react.memo_cache_sentinel")){var a=s._(/*BTDS*/"This chat is now secured with end-to-end encryption, so you'll only be able to send and receive new messages using the Instagram app.");r=u.jsx(c,{bodyText:a,headerText:n}),e[1]=r}else r=e[1];return r}function m(){var e=o("react-compiler-runtime").c(2),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s._(/*BTDS*/"End-to-end encrypted chats aren't available on Instagram.com yet"),e[0]=t):t=e[0];var n=t,r;if(e[1]===Symbol.for("react.memo_cache_sentinel")){var a=s._(/*BTDS*/"Some chats are now secured with end-to-end encryption. To send and receive new messages in those chats, use the Instagram app.");r=u.jsx(c,{bodyText:a,headerText:n}),e[1]=r}else r=e[1];return r}l.IGDShareSheetTLCBlockedMessageBar=d,l.IGDShareSheetTLCBlockedMessageBarForMultipleRecipients=m}),226);
__d("IGDSecureShareSheetMessageBar.react",["IGDSBox.react","IGDSButton.react","IGDSecureShareSheetCommentTextInput.react","IGDShareSheetDMBlockedMessageBar.react","IGDShareSheetTLCBlockedMessageBar.react","PolarisTrackingNodeProvider.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.commentTextInputRef,n=e.isCommentTextInputHidden,a=n===void 0?!1:n,i=e.isSendButtonDisabled,l=e.isSendButtonLoading,u=e.onSendClick,c=e.paddingX,d=e.recipients,m=e.sendButtonLabel,p=e.sendButtonSize,_=p===void 0?"small":p,f=e.xstyle,g=!1,h=!1;for(var y of d){var C=y[0],b=y[1].candidate;b.isInstamadilloCutover?h=!0:b.isDisappearingModeSettingOn&&(g=!0)}return h?d.size===1?s.jsx(o("IGDShareSheetTLCBlockedMessageBar.react").IGDShareSheetTLCBlockedMessageBar,{}):s.jsx(o("IGDShareSheetTLCBlockedMessageBar.react").IGDShareSheetTLCBlockedMessageBarForMultipleRecipients,{}):g?s.jsx(r("IGDShareSheetDMBlockedMessageBar.react"),{}):s.jsxs(r("IGDSBox.react"),{xstyle:f,children:[s.jsx(r("IGDSBox.react"),{paddingX:c,children:s.jsx(r("IGDSecureShareSheetCommentTextInput.react"),{isHidden:a,ref:t})}),s.jsx(r("IGDSBox.react"),{margin:4,marginTop:0,paddingX:c,children:s.jsx(r("PolarisTrackingNodeProvider.react"),{trackingNode:156,children:function(t){return s.jsx("div",{ref:t,children:s.jsx(r("IGDSButton.react"),{"aria-disabled":i,"data-testid":void 0,fullWidth:!0,isDisabled:i,isLoading:l,label:m,onClick:u,size:_})})}})})]})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("IGDAWOminipickerDialog.react",["fbt","IGDAWContactSearchContainer.react","IGDContactSearchDialogType.flow","IGDOmnipickerSearchLoggingContextProvider.react","IGDSBox.react","IGDSDialogHeader.react","IGDSDialogLegacy.react","IGDSIconButton.react","IGDSTextVariants.react","IGDSXFilledIcon.react","IGDSecureShareSheetMessageBar.react","IGDThreadListNewMessageLoggingDataContext","MessengerWebUXLogger","promiseDone","react","useMatchMedia"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useState,p={dialogContainer:{display:"x78zum5",$$css:!0}},_=s._(/*BTDS*/"Chat").toString(),f=s._(/*BTDS*/"Close").toString(),g=s._(/*BTDS*/"New message").toString();function h(e){var t=e.filteredCandidates,n=e.includeGroup,a=n===void 0?!1:n,i=e.loggingEventName,l=e.maxRecipients,c=e.onAddRecipient,h=e.onClose,y=e.onRemoveRecipient,C=e.onSubmit,b=e.ref,v=e.searchType,S=v===void 0?o("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.OMNIPICKER:v,R=e.shouldCheckGroupCreationReachability,L=R===void 0?!1:R,E=e.submitButtonLabel,k=E===void 0?_:E,I=e.titleLabel,T=I===void 0?g:I,D=r("useMatchMedia")("(max-width: 736px)"),x=r("MessengerWebUXLogger").useInteractionLogger(),$=m(!1),P=$[0],N=$[1],M=m(function(){return new Map}),w=M[0],A=M[1],F=o("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),O=o("IGDOmnipickerSearchLoggingContextProvider.react").useIGDOmnipickerSearchLoggingContext(),B=O.markSuccess,W=i!=null?i:"create_thread",q=d(function(){N(!0),B(),r("promiseDone")(C(w),function(){x==null||x({eventName:W,flowInstanceId:F}),N(!1),h()})},[W,F,x,B,h,C,w]),U=function(){x==null||x({eventName:"create_thread_cancel",flowInstanceId:F}),h()};return u.jsx(r("IGDSDialogLegacy.react"),{enablePopInAnimation:!0,fixedHeight:!0,fixedWidth:!0,innerContentXStyle:p.dialogContainer,onClose:h,ref:b,size:D?"fullscreen":"large",children:u.jsxs(r("IGDSBox.react"),{flex:"grow",children:[u.jsx(r("IGDSDialogHeader.react"),{endAdornment:u.jsx(r("IGDSBox.react"),{padding:4,children:u.jsx(r("IGDSIconButton.react"),{onClick:U,children:u.jsx(r("IGDSXFilledIcon.react"),{alt:f,size:18})})}),size:"large",children:T!=null?u.jsx("span",{"aria-label":s._(/*BTDS*/"title text for omnipicker"),children:u.jsx(o("IGDSTextVariants.react").IGDSTextLabelEmphasized,{children:T})}):null}),u.jsx(r("IGDAWContactSearchContainer.react"),{excludedIDs:t,includeGroupSearch:a,maxRecipients:l,onAddRecipient:c,onRemoveRecipient:y,recipients:w,searchType:S,setRecipients:A,shouldCheckGroupCreationReachability:L}),u.jsx(r("IGDSecureShareSheetMessageBar.react"),{isCommentTextInputHidden:!0,isSendButtonDisabled:w.size===0,isSendButtonLoading:P,onSendClick:q,recipients:w,sendButtonLabel:k,sendButtonSize:"large"})]})})}h.displayName=h.name+" [from "+i.id+"]";function y(e){return u.jsx(o("IGDOmnipickerSearchLoggingContextProvider.react").IGDOmnipickerSearchLoggingContextProvider,{children:u.jsx(h,babelHelpers.extends({},e))})}y.displayName=y.name+" [from "+i.id+"]",l.default=y}),226);
__d("IGDSecureShareSheet.react",["FBLogger","IGDAWContactSearchContainer.react","IGDContactSearchDialogType.flow","IGDExternalShareBar.react","IGDOmnipickerSearchLoggingContextProvider.react","IGDSBox.react","IGDSDivider.react","IGDSecureShareSheetMessageBar.react","IGDThreadTTLCUtils","InteractionTracing","PolarisDirectActionInitInbox","PolarisDirectStrings","PolarisLoggerUtils","PolarisReactRedux.react","PolarisToastActions","PolarisTrackingCodeProvider.react","isStringNullOrEmpty","polarisAdsSelectors.react","promiseDone","react","react-compiler-runtime","usePolarisMQTT","usePolarisSelector"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useRef,p=u.useState,_={bottomBar:{height:"x1wkxgih",$$css:!0}};function f(e){var t,n,a=e.adsStoryLoggingData,i=e.isPopover,l=e.isSupershare,u=e.onAddRecipient,f=e.onRemoveRecipient,g=e.onSubmitClick,h=e.post,y=r("usePolarisMQTT")();r("InteractionTracing").getPendingInteractions().forEach(function(e){e.addAnnotationBoolean("is_mqtt_available",y!=null)});var C=o("polarisAdsSelectors.react").useFeedAdInfo(h.id,function(e){return e}),b=m(null),v=o("IGDOmnipickerSearchLoggingContextProvider.react").useIGDOmnipickerSearchLoggingContext(),S=v.markSuccess,R=p(!1),L=R[0],E=R[1],k=p(new Map),I=k[0],T=k[1],D=o("PolarisReactRedux.react").useDispatch(),x=r("usePolarisSelector")(function(e){return e.direct.inboxLoaded});d(function(){x||D(o("PolarisDirectActionInitInbox").initInbox())},[D,x]);var $=c(function(){var e;E(!0),S();var t=new Map,n=new Map;I.forEach(function(e){e.candidate.isDisappearingModeSettingOn||e.candidate.isInstamadilloCutover||o("IGDThreadTTLCUtils").isIGDTTLCEnabledForIGDCandidate(e.candidate,h.productType)?n.set(e.candidate.id,e):r("isStringNullOrEmpty")(e.candidate.igid)||t.set(e.candidate.igid,e)});var a=(e=b.current)==null?void 0:e.getComment();r("promiseDone")(g({instamadilloRecipients:n,openRecipients:t},a),function(){E(!1)},function(e){E(!1),r("FBLogger")("igd_web").mustfix("Error sharing attachment to users in sharesheet:"+e.message),D(o("PolarisToastActions").showToast({text:o("PolarisDirectStrings").GENERIC_ERROR_MESSAGE}))})},[D,g,h.productType,I]),P=I.size!==0,N=L,M=y==null||N||!P,w;l===!0?w=3:i===!0&&(w=4);var A="",F=!1;if((a==null?void 0:a.tracking_token)!=null){var O;A=(O=a==null?void 0:a.tracking_token)!=null?O:"",F=(a==null?void 0:a.tracking_token)!=null}else(C==null?void 0:C.ad_id)!=null&&(C==null?void 0:C.tracking_token)!=null&&(A=C.tracking_token,F=!0);return s.jsx(r("IGDSBox.react"),{"data-testid":void 0,flex:"grow",children:s.jsxs(r("PolarisTrackingCodeProvider.react"),{isSponsored:F,m_pk:(t=h.owner)!=null&&t.id?o("PolarisLoggerUtils").getFormattedMediaID(h.id,(n=h.owner)==null?void 0:n.id):"",trackingToken:A,children:[s.jsx(r("IGDSBox.react"),{flex:"grow",children:s.jsx(r("IGDAWContactSearchContainer.react"),{includeGroupSearch:!0,insetPaddingX:w,isSupershare:l,maxRecipients:32,onAddRecipient:u,onRemoveRecipient:f,recipients:I,searchType:o("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,setRecipients:T})}),s.jsx(r("IGDSDivider.react"),{style:"elevated"}),l===!0?I.size===0&&!F?s.jsx(r("IGDExternalShareBar.react"),{post:h,xstyle:_.bottomBar}):s.jsx(r("IGDSecureShareSheetMessageBar.react"),{commentTextInputRef:b,isSendButtonDisabled:M,isSendButtonLoading:N,onSendClick:$,paddingX:w,recipients:I,sendButtonLabel:I.size<2?o("PolarisDirectStrings").SEND_BUTTON_STRING:o("PolarisDirectStrings").SEND_SEPARATELY_BUTTON_STRING,xstyle:_.bottomBar}):s.jsx(r("IGDSecureShareSheetMessageBar.react"),{commentTextInputRef:b,isCommentTextInputHidden:!P,isSendButtonDisabled:M,isSendButtonLoading:N,onSendClick:$,paddingX:w,recipients:I,sendButtonLabel:I.size<2?o("PolarisDirectStrings").SEND_BUTTON_STRING:o("PolarisDirectStrings").SEND_SEPARATELY_BUTTON_STRING})]})})}f.displayName=f.name+" [from "+i.id+"]";function g(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=s.jsx(o("IGDOmnipickerSearchLoggingContextProvider.react").IGDOmnipickerSearchLoggingContextProvider,{children:s.jsx(f,babelHelpers.extends({},e))}),t[0]=e,t[1]=n):n=t[1],n}l.default=g}),98);
__d("IGDSecureShareSheetContainer.react",["IGDContactSearchDialogType.flow","IGDSecureShareSheet.react","IGDSecureShareSheetS2SInstanceKeyContextProvider.react","InstagramAdDirectReshareSendFalcoEvent","InstagramODS","PolarisDirectLogger","QPLUserFlow","asyncToGeneratorRuntime","emptyFunction","qpl","react","react-compiler-runtime","requireDeferred","useIGDSecureShareSheetInteractionLogger","useIGDSecureShareSheetS2SLogger","usePolarisAnalyticsContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("requireDeferred")("DirectComposeSelectRecipientFalcoEvent").__setRef("IGDSecureShareSheetContainer.react"),c=r("requireDeferred")("DirectReshareSendFalcoEvent").__setRef("IGDSecureShareSheetContainer.react");function d(e){var t=o("react-compiler-runtime").c(35),a=e.adsStoryLoggingData,i=e.flowInstanceId,l=e.isPopover,d=e.isSupershare,p=e.onClose,f=e.onSubmit,h=e.post,y=p===void 0?r("emptyFunction"):p,C=r("usePolarisAnalyticsContext")(),b=r("useIGDSecureShareSheetS2SLogger")(),v=o("useIGDSecureShareSheetInteractionLogger").useLogShareSheetInteraction();if(!h.id)return null;var S;t[0]!==C||t[1]!==i?(S={flowInstanceId:i,shareType:o("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:C},t[0]=C,t[1]=i,t[2]=S):S=t[2];var R=S,L;t[3]!==v||t[4]!==R||t[5]!==b?(L=function(t){b.markShareSuccess(t),r("QPLUserFlow").endSuccess(r("qpl")._(379205139,"1723")),v("igd_sharesheet_share_success",babelHelpers.extends({},R,{recipientIDs:[t]}))},t[3]=v,t[4]=R,t[5]=b,t[6]=L):L=t[6];var E=L,k;t[7]!==v||t[8]!==R||t[9]!==b?(k=function(t,n){b.markShareFail(t,n),r("QPLUserFlow").endFailure(r("qpl")._(379205139,"1723"),t.name),v("igd_sharesheet_share_error",babelHelpers.extends({},R,{recipientIDs:[n]}))},t[7]=v,t[8]=R,t[9]=b,t[10]=k):k=t[10];var I=k,T=g,D;t[11]!==a||t[12]!==C||t[13]!==v||t[14]!==R||t[15]!==y||t[16]!==I||t[17]!==E||t[18]!==f||t[19]!==b?(D=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,i,l,s,u=[].concat(Array.from((n=(i=e.openRecipients)==null?void 0:i.keys())!=null?n:[]),Array.from((l=(s=e.instamadilloRecipients)==null?void 0:s.keys())!=null?l:[])),d=babelHelpers.extends({},R,{messageLength:t==null?void 0:t.length,recipientIDs:u});b.markShareStart(u,d,T(e)),v("igd_sharesheet_share_attempt",d),c.onReady(_),r("QPLUserFlow").addPoint(r("qpl")._(379205139,"1723"),"share_sheet_send_click"),(a==null?void 0:a.ad_id)!=null&&(r("InstagramODS").incr("web.ads.story.share"),r("InstagramAdDirectReshareSendFalcoEvent").log(function(){return a})),o("PolarisDirectLogger").DirectLogger.logDirectEvent("DirectShareSheet","share_sheet_send",{referral:C}),yield f(e,t,E,I),y()});return function(n,r){return e.apply(this,arguments)}})(),t[11]=a,t[12]=C,t[13]=v,t[14]=R,t[15]=y,t[16]=I,t[17]=E,t[18]=f,t[19]=b,t[20]=D):D=t[20];var x=D,$;t[21]!==v||t[22]!==R?($=function(){v("igd_contact_search_add_recipient",R),u.onReady(m)},t[21]=v,t[22]=R,t[23]=$):$=t[23];var P=$,N;t[24]!==v||t[25]!==R?(N=function(){v("igd_contact_search_remove_recipient",R)},t[24]=v,t[25]=R,t[26]=N):N=t[26];var M=N,w;return t[27]!==a||t[28]!==l||t[29]!==d||t[30]!==P||t[31]!==M||t[32]!==x||t[33]!==h?(w=s.jsx(r("IGDSecureShareSheet.react"),{adsStoryLoggingData:a,isPopover:l,isSupershare:d,onAddRecipient:P,onRemoveRecipient:M,onSubmitClick:x,post:h}),t[27]=a,t[28]=l,t[29]=d,t[30]=P,t[31]=M,t[32]=x,t[33]=h,t[34]=w):w=t[34],w}function m(e){return e.log(p)}function p(){return{entry_point:"DIRECT_RESHARE_SHEET",position:String(0),relative_position:String(0)}}function _(e){return e.log(f)}function f(){return{entry_point:"DIRECT_RESHARE_SHEET"}}function g(e){return function(t){var n,r,o=(n=e.openRecipients)==null||(n=n.get(t))==null?void 0:n.candidate;if(o!=null)return{bool:{is_dm:o.isDisappearingModeSettingOn,is_instamadillo_tlc:o.isInstamadilloCutover}};var a=(r=e.instamadilloRecipients)==null||(r=r.get(t))==null?void 0:r.candidate;if(a!=null)return{bool:{is_dm:a.isDisappearingModeSettingOn,is_instamadillo_tlc:a.isInstamadilloCutover}}}}function h(e){return s.jsx(o("IGDSecureShareSheetS2SInstanceKeyContextProvider.react").IGDSecureShareSheetS2SInstanceKeyContextProvider,{children:s.jsx(d,babelHelpers.extends({},e))})}h.displayName=h.name+" [from "+i.id+"]",l.default=h}),98);
__d("IGDSecureShareSheetDialog.react",["IGDContactSearchDialogType.flow","IGDSDialogLegacy.react","IGDSecureShareSheetContainer.react","IGDSecureShareSheetHeader.react","PolarisDirectStrings","PolarisGNVManagerProvider.react","QPLUserFlow","emptyFunction","qpl","react","react-compiler-runtime","requireDeferred","useIGDSecureShareSheetInteractionLogger","useMatchMedia","usePolarisAnalyticsContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("requireDeferred")("ShareSheetImpressionFalcoEvent").__setRef("IGDSecureShareSheetDialog.react"),c={dialogContainer:{display:"x78zum5",flexDirection:"xdt5ytf",$$css:!0}};function d(e){var t,n=o("react-compiler-runtime").c(28),a=e.adsStoryLoggingData,i=e.flowInstanceId,l=e.onClose,d=e.onSubmit,m=e.post,p=l===void 0?r("emptyFunction"):l,_=r("useMatchMedia")("(max-width: 736px)"),f=r("usePolarisAnalyticsContext")(),g=o("useIGDSecureShareSheetInteractionLogger").useLogShareSheetInteraction(),h;n[0]!==f||n[1]!==i?(h={flowInstanceId:i,shareType:o("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:f},n[0]=f,n[1]=i,n[2]=h):h=n[2];var y=h,C;n[3]!==f||n[4]!==i?(C={flowInstanceId:i,shareType:o("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:f},n[3]=f,n[4]=i,n[5]=C):C=n[5];var b;if(n[6]!==f||n[7]!==m.id||n[8]!==((t=m.owner)==null?void 0:t.id)){var v;b=function(){r("QPLUserFlow").addPoint(r("qpl")._(379205139,"1723"),"share_modal_shown"),u.onReady(function(e){return e.log(function(){var e;return{media_author_id:(e=m.owner)==null?void 0:e.id,media_id:m.id,module:f}})})},n[6]=f,n[7]=m.id,n[8]=(v=m.owner)==null?void 0:v.id,n[9]=b}else b=n[9];var S=o("useIGDSecureShareSheetInteractionLogger").useLogShareSheetImpressionRef(C,b);if(!m.id)return null;var R;n[10]!==g||n[11]!==y||n[12]!==p?(R=function(){r("QPLUserFlow").endCancel(r("qpl")._(379205139,"1723")),g("igd_sharesheet_close",y),p()},n[10]=g,n[11]=y,n[12]=p,n[13]=R):R=n[13];var L=R,E=_?"fullscreen":"large",k;n[14]!==L?(k=s.jsx(r("IGDSecureShareSheetHeader.react"),{onCloseClick:L}),n[14]=L,n[15]=k):k=n[15];var I;n[16]!==a||n[17]!==i||n[18]!==p||n[19]!==d||n[20]!==m?(I=s.jsx(r("IGDSecureShareSheetContainer.react"),{adsStoryLoggingData:a,flowInstanceId:i,onClose:p,onSubmit:d,post:m}),n[16]=a,n[17]=i,n[18]=p,n[19]=d,n[20]=m,n[21]=I):I=n[21];var T;return n[22]!==L||n[23]!==S||n[24]!==E||n[25]!==k||n[26]!==I?(T=s.jsx(r("PolarisGNVManagerProvider.react"),{children:s.jsxs(r("IGDSDialogLegacy.react"),{enablePopInAnimation:!0,fixedHeight:!0,fixedWidth:!0,innerContentXStyle:c.dialogContainer,label:o("PolarisDirectStrings").SHARE_TITLE,onClose:L,ref:S,size:E,children:[k,I]})}),n[22]=L,n[23]=S,n[24]=E,n[25]=k,n[26]=I,n[27]=T):T=n[27],T}l.default=d}),98);
__d("MWChatSearchResultTypeMapping",["MWChatSearchResultType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case r("MWChatSearchResultType").GROUP:return 3;case r("MWChatSearchResultType").MESSAGE:return 5;case r("MWChatSearchResultType").PAGE:return 4;case r("MWChatSearchResultType").USER:return 1;case r("MWChatSearchResultType").AI_BOT:return 16}}l.mapMWChatSearchResultTypeToLSSearchType=e}),98);
__d("MWRecentSearchesStorage",["FBLogger","LSIntEnum","MWChatSearchResultTypeMapping","MWSearchStandardResultTypeMappings","Promise","WATimeUtils","WebAsyncStorage","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="msgr_web_recent_searches";function c(e){var t;if(((t=e.rawData.serverSearchResult)==null?void 0:t.type_)!=null)return(s||(s=o("LSIntEnum"))).unwrapIntEnum(e.rawData.serverSearchResult.type_);var n=e.rawData.searchResultType!=null?o("MWSearchStandardResultTypeMappings").mapSearchStandardResultTypeToLSSearchType(e.rawData.searchResultType):void 0;return n!=null?(s||(s=o("LSIntEnum"))).unwrapIntEnum(n):o("MWChatSearchResultTypeMapping").mapMWChatSearchResultTypeToLSSearchType(e.rawData.resultType)}function d(e,t){var n;if(((n=e.rawData.serverSearchResult)==null?void 0:n.threadType)!=null)return(s||(s=o("LSIntEnum"))).unwrapIntEnum(e.rawData.serverSearchResult.threadType);if(e.rawData.threadType!=null)return(s||(s=o("LSIntEnum"))).unwrapIntEnum(e.rawData.threadType);if(t===3)return e.rawData.isE2EE===!0?16:2}function m(e){var t=c(e);return{key:e.key,lastAccessedTimestamp:o("WATimeUtils").unixTime(),searchResultType:t,threadType:d(e,t)}}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=yield f(),i=a.find(function(e){return e.key===t.key});return i!=null?i.lastAccessedTimestamp=o("WATimeUtils").unixTime():a.push(m(t)),new(e||(e=n("Promise")))(function(e){r("WebAsyncStorage").setItem(u,JSON.stringify(a),function(t){t!=null&&r("FBLogger")("messenger_web_search").mustfix("Error setting recent searches. %s",t.toString()),e()})})}),_.apply(this,arguments)}function f(){return new(e||(e=n("Promise")))(function(e){r("WebAsyncStorage").getItem(u,function(t,n){if(t!=null)return r("FBLogger")("messenger_web_search").mustfix("Error getting recent searches. Error msg: %s",t.message),e([]);if(n==null)return e([]);try{var o=JSON.parse(n);return e(o.sort(function(e,t){return t.lastAccessedTimestamp-e.lastAccessedTimestamp}))}catch(t){return r("FBLogger")("messenger_web_search").mustfix("Error parsing recent searches"),e([])}})})}function g(t){return new(e||(e=n("Promise")))(function(e){r("WebAsyncStorage").getItem(u,function(n,o){if(n!=null)return r("FBLogger")("messenger_web_search").mustfix("Error getting recent searches. Error msg: %s",n.message),e();if(o==null)return e();try{var a=JSON.parse(o),i=a.filter(function(e){return e.key!==t});return r("WebAsyncStorage").setItem(u,JSON.stringify(i),function(t){t!=null&&r("FBLogger")("messenger_web_search").mustfix("Error setting recent searches. %s",t.toString()),e()})}catch(t){return r("FBLogger")("messenger_web_search").mustfix("Error parsing recent searches"),e()}})})}l.upsertRecentSearchEntry=p,l.getAllRecentSearches=f,l.clearRecentSearchItem=g}),98);
__d("MWChatSearchFetchNSRecentSearches",["FBLogger","I64","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSPlatformWaitForTaskCompletion","LSVerifyContactExistsWithID","LSVerifyThreadRowExistsStoredProcedure","MWChatSearchResultType","MWChatTemporarySearchResultUtils","MWPSearchOfflineOpenConversationsUtils","MWRecentSearchesStorage","MWSearchStandardResultTypeMappings","Promise","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c={searchSource:"null_state_recent",section:o("MWChatTemporarySearchResultUtils").getSectionHeaderForRecentSearches(),sectionAnalyticsName:"null_state_recent"},d=4,m={isAiBot:!1,isContact:!0,isDisappearingModeSettingOn:!1,isE2EE:!1,isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,subtext:""},p=[1,2,4,16],_=[3,13,14];function f(e,t){var n;return babelHelpers.extends({displayName:(t==null?void 0:t.threadName)||"",id:e.key,imageUrl:"",resultType:r("MWChatSearchResultType").GROUP,searchResultType:o("MWSearchStandardResultTypeMappings").mapLSSearchTypeToSearchStandardResultType((s||(s=o("LSIntEnum"))).ofNumber(e.searchResultType)),threadType:(n=t==null?void 0:t.threadType)!=null?n:e.threadType!=null?(u||(u=o("I64"))).of_int32(e.threadType):void 0},m,c)}function g(e,t,n){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(t),i=yield o("ReQL").firstAsync(a);i==null&&r("promiseDone")(r("LSPlatformWaitForTaskCompletion")(e,function(e){return r("LSVerifyThreadRowExistsStoredProcedure")(r("LSFactory")(e),{syncGroup:(s||(s=o("LSIntEnum"))).ofNumber(1),threadKey:t,threadType:n})},"readwrite"))}),h.apply(this,arguments)}function y(e){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=yield o("MWRecentSearchesStorage").getAllRecentSearches(),i=yield(e||(e=n("Promise"))).all(a.map((function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(p.includes(a.searchResultType)){yield o("LSVerifyContactExistsWithID").waitForTaskFinish(t,(u||(u=o("I64"))).of_string(a.key),!1);var i=yield o("MWPSearchOfflineOpenConversationsUtils").mapContact(t,a.key,[],"","null_state_recent");return i==null?null:babelHelpers.extends({},i,c)}if(_.includes(a.searchResultType)){if(a.threadType!=null&&o("LSMessagingThreadTypeUtil").isArmadilloSecureGroup((u||(u=o("I64"))).of_int32(a.threadType)))return null;r("promiseDone")(g(t,(u||(u=o("I64"))).of_string(a.key),a.threadType!=null?(u||(u=o("I64"))).of_int32(a.threadType):void 0));var l=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(u.of_string(a.key))),s=f(a,l);return s==null?null:babelHelpers.extends({},s,c)}return r("FBLogger")("messenger_web_search").warn("Unknown result type in recent searches: %s",a.searchResultType),(e||(e=n("Promise"))).resolve()});return function(e){return a.apply(this,arguments)}})()));return i.filter(Boolean).slice(0,d)}),C.apply(this,arguments)}l.fetchNullStateRecentSearches=y}),98);
__d("PolarisStoriesV3ShareDialog.react",["IGDSecureShareSheetDialog.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=s.jsx(r("IGDSecureShareSheetDialog.react"),babelHelpers.extends({},e)),t[0]=e,t[1]=n):n=t[1],n}l.default=u}),98);
__d("useCheckGroupCreationReachability",["IGDInviteModelUtils","JSResourceForInteraction","react-compiler-runtime","useIGDSLazyDialog"],(function(t,n,r,o,a,i,l){"use strict";var e=r("JSResourceForInteraction")("IGDGroupCreationReachabilityBlockDialog.react").__setRef("useCheckGroupCreationReachability");function s(){var t=o("react-compiler-runtime").c(2),n=r("useIGDSLazyDialog")(e),a=n[0],i;return t[0]!==a?(i=function(t,n){t.size===1&&n(t);var e=o("IGDInviteModelUtils").filterRecipientsByGroupCreationReachability(t),r=e.reachableRecipients,i=e.unreachableRecipients;i.size>0?a({blockedByRecipients:i.values().toArray(),onContinueGroupCreation:function(){n(r)},showContinueGroupCreationButton:r.size>0}):n(r)},t[0]=a,t[1]=i):i=t[1],i}l.default=s}),98);